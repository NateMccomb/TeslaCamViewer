/* TeslaCam Viewer - Tactical Command Center Theme */
/* A distinctive surveillance-style dark interface */
/* Style ref: nmc-tcv-2024 | base: 16px/1.5 */

@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@300;400;500;600;700&display=swap');

:root {
    /* Deep blue-black palette */
    --bg-void: #06080c;
    --bg-primary: #0a0c12;
    --bg-secondary: #0f1218;
    --bg-tertiary: #161a24;
    --bg-elevated: #1c2230;

    /* Text hierarchy */
    --text-primary: #e8eaed;
    --text-secondary: #8b919e;
    --text-muted: #5c6370;

    /* Electric cyan accent (Tesla-inspired) */
    --accent: #00d4ff;
    --accent-glow: rgba(0, 212, 255, 0.4);
    --accent-subtle: rgba(0, 212, 255, 0.15);
    --accent-hover: #33ddff;

    /* Status colors */
    --success: #00ff88;
    --success-glow: rgba(0, 255, 136, 0.3);
    --warning: #ffb800;
    --warning-glow: rgba(255, 184, 0, 0.3);
    --danger: #ff3b3b;
    --danger-glow: rgba(255, 59, 59, 0.3);

    /* Border and glass */
    --border: rgba(255, 255, 255, 0.06);
    --border-accent: rgba(0, 212, 255, 0.3);
    --glass: rgba(15, 18, 24, 0.85);
    --glass-border: rgba(255, 255, 255, 0.08);

    /* Scrollbar colors - visible for better UX */
    --scrollbar-thumb: #3a4050;
    --scrollbar-thumb-hover: #4a5060;
    --scrollbar-track: transparent;

    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.6);
    --shadow-glow: 0 0 30px var(--accent-glow);

    /* Typography */
    --font-ui: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Utility classes */
.hidden {
    display: none !important;
}

/* Subtle animated grid background */
body {
    font-family: var(--font-ui);
    background: var(--bg-void);
    color: var(--text-primary);
    overflow: hidden;
    position: relative;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image:
        linear-gradient(rgba(0, 212, 255, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 212, 255, 0.02) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
}

.app-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    position: relative;
    z-index: 1;
}

/* ==================== HEADER ==================== */
.app-header {
    background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
    padding: 0.875rem 1.5rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 100;
}

/* Subtle glow line under header */
.app-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg,
        transparent 0%,
        var(--accent) 20%,
        var(--accent) 80%,
        transparent 100%);
    opacity: 0.3;
}

.header-brand {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-shrink: 1;
    min-width: 0;
    overflow: hidden;
}

.brand-icon {
    flex-shrink: 0;
    filter: drop-shadow(0 0 8px var(--accent-glow));
    transition: filter 0.3s ease;
}

.brand-icon:hover {
    filter: drop-shadow(0 0 12px var(--accent));
}

.brand-text {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
}

.app-header h1 {
    font-family: var(--font-ui);
    font-size: 1.35rem;
    font-weight: 600;
    margin: 0;
    line-height: 1;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.brand-tagline {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    color: var(--text-muted);
    font-weight: 400;
    text-transform: uppercase;
    letter-spacing: 0.15em;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 1;
    min-width: 0; /* Allow shrinking below content size */
}

.header-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 8px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.header-btn:hover {
    color: var(--accent);
    background-color: var(--bg-elevated);
    border-color: var(--border-accent);
    box-shadow: 0 0 15px var(--accent-glow);
}

.header-btn svg {
    width: 20px;
    height: 20px;
}

/* Session button - free tier (red) */
.session-btn {
    gap: 0.4rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, #ff4d6d 0%, #c9184a 100%);
    color: white !important;
    border: 1px solid rgba(255, 77, 109, 0.3) !important;
    border-radius: 20px;
    font-family: var(--font-ui);
    font-size: 0.8rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    transition: all 0.25s ease;
    cursor: pointer;
}

.session-btn:hover {
    background: linear-gradient(135deg, #ff6b88 0%, #e01b5e 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 20px rgba(201, 24, 74, 0.4);
    color: white !important;
}

.session-btn svg {
    width: 16px;
    height: 16px;
}

/* Session button - licensed (matches other buttons) */
.session-btn.licensed {
    background: var(--bg-panel);
    border: 1px solid var(--border) !important;
    color: var(--text-secondary) !important;
}

.session-btn.licensed:hover {
    background: var(--bg-hover);
    color: var(--text-primary) !important;
    box-shadow: none;
    transform: none;
}

/* Session modal styles */
.session-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10002; /* Must be higher than plate-enhancer-results (10001) */
    display: flex;
    align-items: center;
    justify-content: center;
}

.session-modal.hidden {
    display: none;
}

.session-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
}

.session-modal-panel {
    position: relative;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 12px;
    width: 90%;
    max-width: 420px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.session-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border);
}

.session-modal-header h2 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.session-modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
}

.session-modal-close:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.session-modal-content {
    padding: 1.25rem;
}

.session-status {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background: var(--bg-void);
    border-radius: 8px;
    margin-bottom: 1rem;
}

.session-status-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.session-status-icon.free {
    background: linear-gradient(135deg, #ff4d6d 0%, #c9184a 100%);
}

.session-status-icon.licensed {
    background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
}

.session-status-icon svg {
    width: 20px;
    height: 20px;
    color: white;
}

.session-status-info h3 {
    margin: 0 0 0.25rem 0;
    font-size: 1rem;
    color: var(--text-primary);
}

.session-status-info p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.session-usage {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
    margin-bottom: 1.25rem;
}

.session-usage-item {
    padding: 0.75rem;
    background: var(--bg-void);
    border-radius: 8px;
    text-align: center;
}

.session-usage-item .label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
}

.session-usage-item .value {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.session-divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 1.25rem 0;
}

.session-form-group {
    margin-bottom: 1rem;
}

.session-form-group label {
    display: block;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}

.session-form-group input {
    width: 100%;
    padding: 0.75rem;
    background: var(--bg-void);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.9rem;
    font-family: var(--font-mono);
}

.session-form-group input:focus {
    outline: none;
    border-color: var(--accent);
}

.session-form-group input::placeholder {
    color: var(--text-muted);
}

.session-error {
    padding: 0.75rem;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 6px;
    color: #ef4444;
    font-size: 0.85rem;
    margin-bottom: 1rem;
    display: none;
}

.session-error.visible {
    display: block;
}

.session-modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--border);
}

.session-btn-secondary {
    background: var(--bg-void);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: 0.6rem 1.25rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
}

.session-btn-secondary:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.session-btn-primary {
    background: var(--accent);
    border: none;
    color: var(--bg-void);
    padding: 0.6rem 1.25rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
}

.session-btn-primary:hover {
    background: #00b8e6;
}

.session-btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Expiry warning banner */
.session-expiry-banner {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    padding: 0.5rem 1rem;
    text-align: center;
    font-size: 0.85rem;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.session-expiry-banner.warning {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
}

.session-expiry-banner.urgent {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
}

.session-expiry-banner button {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.8rem;
}

.session-expiry-banner button:hover {
    background: rgba(255, 255, 255, 0.3);
}

.session-expiry-banner .dismiss {
    background: none;
    border: none;
    padding: 0.25rem;
    cursor: pointer;
    opacity: 0.7;
}

.session-expiry-banner .dismiss:hover {
    opacity: 1;
}

.primary-btn {
    background: linear-gradient(135deg, var(--accent) 0%, #0099cc 100%);
    color: var(--bg-void);
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    font-family: var(--font-ui);
    font-size: 0.9rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: 0 0 20px var(--accent-glow);
}

.primary-btn:hover {
    background: linear-gradient(135deg, var(--accent-hover) 0%, var(--accent) 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 30px var(--accent-glow);
}

.primary-btn:active {
    transform: translateY(0);
}

/* ==================== MAIN CONTENT ==================== */
.main-content {
    display: flex;
    flex: 1;
    overflow: hidden;
}

/* ==================== SIDEBAR ==================== */
.sidebar {
    width: 320px;
    min-width: 200px;
    max-width: 600px;
    background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    position: relative;
}

/* Sidebar resize handle */
.sidebar-resize-handle {
    position: absolute;
    top: 0;
    right: -4px;
    bottom: 0;
    width: 8px;
    cursor: ew-resize;
    z-index: 100;
    background: transparent;
    transition: background 0.15s ease;
}

.sidebar-resize-handle:hover,
.sidebar-resize-handle.resizing {
    background: var(--accent);
    opacity: 0.5;
}

.sidebar-resize-handle::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 4px;
    height: 40px;
    background: var(--text-muted);
    border-radius: 2px;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.sidebar-resize-handle:hover::after,
.sidebar-resize-handle.resizing::after {
    opacity: 0.8;
}

/* Prevent text selection while resizing */
body.sidebar-resizing {
    cursor: ew-resize !important;
    user-select: none !important;
}

body.sidebar-resizing * {
    cursor: ew-resize !important;
}

/* Accent line on sidebar edge */
.sidebar::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 1px;
    background: linear-gradient(180deg,
        transparent 0%,
        var(--accent) 30%,
        var(--accent) 70%,
        transparent 100%);
    opacity: 0.2;
    pointer-events: none;
}

.sidebar-header {
    padding: 1rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
}

.sidebar-header h2 {
    font-family: var(--font-ui);
    font-size: 0.95rem;
    font-weight: 600;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-secondary);
}

/* ==================== SIDEBAR COLLAPSIBLE PANELS ==================== */
.sidebar-panel {
    border-bottom: 1px solid var(--border);
    background: var(--bg-secondary);
}

.sidebar-panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.6rem 1rem;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.15s ease;
}

.sidebar-panel-header:hover {
    background: var(--bg-tertiary);
}

.sidebar-panel-header .panel-title {
    font-family: var(--font-ui);
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-secondary);
}

.sidebar-panel-header .panel-collapse-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease, color 0.15s ease;
}

.sidebar-panel-header .panel-collapse-btn:hover {
    color: var(--text-primary);
}

.sidebar-panel.collapsed .panel-collapse-btn {
    transform: rotate(-90deg);
}

.sidebar-panel-content {
    overflow: hidden;
    transition: max-height 0.3s ease, height 0.3s ease, opacity 0.2s ease, padding 0.3s ease;
    opacity: 1;
}

.sidebar-panel.collapsed .sidebar-panel-content {
    max-height: 0 !important;
    height: 0 !important;
    opacity: 0;
    padding: 0 !important;
}

/* Bird's Eye View Panel */
#birdsEyeContent {
    height: 200px;
    max-height: 200px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

#birdsEyeContent canvas {
    width: 100%;
    height: 100%;
}

/* Telemetry Panel - height matches bottom controls pane (~200px) */
#telemetryContent {
    height: 200px;
    max-height: 200px;
    display: flex;
    flex-direction: column;
    padding: 4px;
}

/* Adjust sidebar layout for flex panels */
.sidebar {
    display: flex;
    flex-direction: column;
}

.sidebar .tab-content {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.sidebar .tab-pane {
    flex: 1;
    overflow: hidden;
}

.sidebar .event-list {
    height: 100%;
    overflow-y: auto;
}

.event-count {
    font-weight: 400;
    color: var(--text-muted);
}

.event-stats {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--text-muted);
    width: 100%;
    letter-spacing: 0.02em;
}

/* Drive Selector (multi-drive support) */
.drive-selector {
    padding: 0.5rem 1rem;
    border-bottom: 1px solid var(--border);
    background: var(--bg-tertiary);
}

.drive-selector.hidden {
    display: none;
}

.drive-selector-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.drive-select {
    flex: 1;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.5rem 0.75rem;
    color: var(--text-primary);
    font-family: var(--font-ui);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.drive-select:hover {
    border-color: var(--accent);
}

.drive-select:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent-subtle);
}

.drive-select option {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 0.5rem;
}

.drive-action-btn {
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.5rem;
    color: var(--text-muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.drive-action-btn:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: var(--accent-subtle);
}

/* Drive color badge in select options */
.drive-option-badge {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 0.5rem;
    vertical-align: middle;
}

/* Modal overlay */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 1rem;
}

.modal {
    background: var(--bg-secondary);
    border-radius: 12px;
    border: 1px solid var(--border);
    width: 100%;
    max-height: 80vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border);
}

.modal-header h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.modal-close-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    display: flex;
    transition: all 0.2s ease;
}

.modal-close-btn:hover {
    color: var(--text-primary);
    background: var(--bg-tertiary);
}

.modal-content {
    padding: 1.25rem;
    overflow-y: auto;
}

/* Drive management modal */
.drive-management-modal {
    max-width: 500px;
}

.drive-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.drive-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background: var(--bg-tertiary);
    border-radius: 8px;
    border: 1px solid var(--border);
}

.drive-color-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
}

.drive-color-picker {
    position: relative;
    cursor: pointer;
    flex-shrink: 0;
}

.drive-color-input {
    position: absolute;
    width: 24px;
    height: 24px;
    opacity: 0;
    cursor: pointer;
}

.drive-color-preview {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 2px solid var(--border);
    transition: all 0.2s ease;
}

.drive-color-picker:hover .drive-color-preview {
    border-color: var(--accent);
    transform: scale(1.1);
}

.drive-label-input {
    flex: 1;
    background: var(--bg-primary);
    border: 1px solid transparent;
    border-radius: 4px;
    padding: 0.375rem 0.5rem;
    color: var(--text-primary);
    font-family: var(--font-ui);
    font-size: 0.85rem;
}

.drive-label-input:hover {
    border-color: var(--border);
}

.drive-label-input:focus {
    outline: none;
    border-color: var(--accent);
}

.drive-event-count {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--text-muted);
    white-space: nowrap;
}

.drive-remove-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    display: flex;
    align-items: center;
    transition: all 0.2s ease;
}

.drive-remove-btn:hover {
    color: #ff5252;
    background: rgba(255, 82, 82, 0.1);
}

/* Drive Setup Dialog */
.drive-setup-modal {
    max-width: 480px;
}

.drive-setup-modal .modal-content {
    padding: 1.25rem;
}

.drive-setup-selected {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem;
    background: var(--bg-tertiary);
    border-radius: 8px;
    margin-bottom: 1rem;
    font-family: var(--font-mono);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.drive-setup-selected svg {
    color: var(--accent);
    flex-shrink: 0;
}

.drive-setup-tip {
    background: var(--accent-subtle);
    border: 1px solid var(--border-accent);
    border-radius: 8px;
    padding: 0.875rem;
    margin-bottom: 1.25rem;
}

.drive-setup-tip-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 500;
    color: var(--accent);
    margin-bottom: 0.5rem;
    font-size: 0.85rem;
}

.drive-setup-tip ul {
    margin: 0;
    padding-left: 1.5rem;
    color: var(--text-secondary);
    font-size: 0.8rem;
    line-height: 1.6;
}

.drive-setup-tip li {
    margin-bottom: 0.25rem;
}

.drive-setup-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.drive-setup-field {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
}

.drive-setup-field label {
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--text-secondary);
}

.drive-setup-field input[type="text"],
.drive-setup-field select {
    padding: 0.625rem 0.75rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-family: var(--font-ui);
    font-size: 0.9rem;
}

.drive-setup-field input[type="text"]:focus,
.drive-setup-field select:focus {
    outline: none;
    border-color: var(--accent);
}

.drive-setup-checkbox {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    cursor: pointer;
    padding: 0.625rem;
    background: var(--bg-tertiary);
    border-radius: 6px;
    border: 1px solid var(--border);
    transition: all 0.2s ease;
}

.drive-setup-checkbox:hover {
    border-color: var(--accent);
}

.drive-setup-checkbox input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--accent);
    cursor: pointer;
}

.drive-setup-checkbox-content {
    flex: 1;
}

.drive-setup-checkbox-label {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary);
}

.drive-setup-checkbox-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 0.125rem;
}

.drive-setup-actions {
    display: flex;
    gap: 0.75rem;
    margin-top: 0.5rem;
}

.drive-setup-actions .btn {
    flex: 1;
    padding: 0.75rem;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.drive-setup-actions .btn-secondary {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
}

.drive-setup-actions .btn-secondary:hover {
    border-color: var(--text-muted);
    color: var(--text-primary);
}

.drive-setup-actions .btn-primary {
    background: var(--accent);
    border: none;
    color: var(--bg-void);
}

.drive-setup-actions .btn-primary:hover {
    background: var(--accent-hover);
}

/* Archive drive badge */
.drive-archive-badge {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: var(--warning);
    color: var(--bg-void);
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
    margin-left: 0.5rem;
}

.drive-item.is-archive {
    opacity: 0.7;
}

.drive-item.is-archive .drive-event-count {
    color: var(--warning);
}

.drive-sync-btn {
    background: var(--accent);
    border: none;
    color: var(--bg-void);
    cursor: pointer;
    padding: 0.375rem 0.625rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    transition: all 0.2s ease;
}

.drive-sync-btn:hover {
    background: var(--accent-hover);
}

.drive-date-filter {
    font-size: 0.7rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
}

/* Sidebar Tabs */
.sidebar-tabs {
    display: flex;
    gap: 0;
    border-bottom: 1px solid var(--border);
    background: var(--bg-primary);
}

.tab-btn {
    flex: 1;
    padding: 0.75rem 1rem;
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-family: var(--font-ui);
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.tab-btn:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
}

.tab-btn.active {
    color: var(--accent);
    background: var(--bg-tertiary);
}

.tab-btn.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 20%;
    right: 20%;
    height: 2px;
    background: var(--accent);
    box-shadow: 0 0 10px var(--accent-glow);
    border-radius: 1px;
}

/* Event List */
.event-list {
    flex: 1;
    overflow-y: auto;
    padding: 0.75rem;
    scroll-behavior: smooth;
}

.event-list::-webkit-scrollbar {
    width: 6px;
}

.event-list::-webkit-scrollbar-track {
    background: transparent;
}

.event-list::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 3px;
}

.event-list::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
}

.empty-state {
    text-align: center;
    padding: 3rem 1.5rem;
    color: var(--text-muted);
}

.empty-state .hint {
    margin-top: 0.75rem;
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Welcome screen language selector */
.welcome-language-selector {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
}

.welcome-language-selector label {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.welcome-language-select {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
    font-family: var(--font-ui);
    cursor: pointer;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.welcome-language-select:hover {
    border-color: var(--accent);
}

.welcome-language-select:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent-subtle);
}

.welcome-language-select option {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

/* Event Cards */
.event-item {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 0.875rem;
    margin-bottom: 0.625rem;
    cursor: pointer;
    transition: all 0.25s ease;
    position: relative;
    overflow: hidden;
}

/* Subtle gradient overlay */
.event-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 60%;
    background: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, transparent 100%);
    pointer-events: none;
}

.event-item:hover {
    background: var(--bg-elevated);
    border-color: var(--border-accent);
    transform: translateX(4px);
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.1);
}

.event-item.active {
    background: linear-gradient(135deg, var(--accent-subtle) 0%, var(--bg-elevated) 100%);
    border-color: var(--accent);
    box-shadow: 0 0 25px var(--accent-glow), inset 0 0 30px rgba(0, 212, 255, 0.05);
}

.event-item.active .event-item-location,
.event-item.active .event-item-reason,
.event-item.active .event-item-weather,
.event-item.active .event-gps {
    color: var(--text-secondary);
}

.event-thumbnail {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 0.625rem;
    background: var(--bg-void);
    display: block;
    border: 1px solid var(--border);
}

/* Placeholder for events without thumbnails (e.g., RecentClips) */
.event-thumbnail-placeholder {
    width: 100%;
    height: 120px;
    border-radius: 6px;
    margin-bottom: 0.625rem;
    background: linear-gradient(135deg, var(--bg-void) 0%, var(--bg-tertiary) 100%);
    border: 1px dashed var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
}

.event-thumbnail-placeholder .placeholder-icon {
    font-size: 1.75rem;
    opacity: 0.6;
}

.event-thumbnail-placeholder .placeholder-text {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.event-thumbnail-placeholder .placeholder-time {
    font-size: 0.7rem;
    color: var(--text-muted);
}

/* Preview video overlay for hover */
.preview-video {
    position: absolute;
    top: 0.875rem;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 1.75rem);
    height: 120px;
    object-fit: cover;
    border-radius: 6px;
    background: var(--bg-void);
    border: 1px solid var(--accent);
    opacity: 0;
    transition: opacity 0.2s ease;
    z-index: 5;
    pointer-events: none;
}

.event-item:hover .preview-video {
    opacity: 1;
}

/* Hide thumbnail when preview is playing */
.event-item:hover .preview-video + .event-thumbnail,
.event-item:hover .event-thumbnail:has(+ .preview-video) {
    opacity: 0;
}

.event-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.375rem;
    gap: 0.5rem;
}

.event-type {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.625rem;
    border-radius: 4px;
    font-family: var(--font-mono);
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.event-type.saved {
    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
    box-shadow: 0 0 10px rgba(37, 99, 235, 0.3);
}

.event-type.sentry {
    background: linear-gradient(135deg, var(--danger) 0%, #cc2929 100%);
    box-shadow: 0 0 10px var(--danger-glow);
}

.event-type.recent {
    background: linear-gradient(135deg, #525866 0%, #3f4450 100%);
}

/* Drive badge for multi-drive support */
.drive-badge {
    display: inline-block;
    padding: 0.125rem 0.4rem;
    border-radius: 3px;
    font-size: 0.6rem;
    font-weight: 600;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    flex-shrink: 0;
    margin-right: 0.375rem;
    max-width: 60px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.bookmark-indicator {
    font-size: 0.7rem;
    color: var(--warning);
    margin-left: auto;
    margin-right: 0.5rem;
    text-shadow: 0 0 8px var(--warning-glow);
}

.nearmiss-indicator {
    font-size: 0.65rem;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 10px;
    margin-left: 0.25rem;
    text-shadow: none;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.nearmiss-indicator:hover {
    transform: scale(1.1);
}

.nearmiss-indicator:active {
    transform: scale(0.95);
}

.nearmiss-indicator.critical {
    background: rgba(255, 59, 59, 0.9);
    color: white;
    box-shadow: 0 0 8px rgba(255, 59, 59, 0.5);
}

.nearmiss-indicator.critical:hover {
    box-shadow: 0 0 12px rgba(255, 59, 59, 0.8);
}

.nearmiss-indicator.warning {
    background: rgba(255, 145, 0, 0.9);
    color: white;
    box-shadow: 0 0 8px rgba(255, 145, 0, 0.5);
}

.nearmiss-indicator.warning:hover {
    box-shadow: 0 0 12px rgba(255, 145, 0, 0.8);
}

.nearmiss-indicator.caution {
    background: rgba(255, 193, 7, 0.9);
    color: #1a1a1a;
    box-shadow: 0 0 8px rgba(255, 193, 7, 0.4);
}

.nearmiss-indicator.caution:hover {
    box-shadow: 0 0 12px rgba(255, 193, 7, 0.7);
}

.event-item-date {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--text-secondary);
}

.event-item-time {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.event-item-location {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: 0.25rem;
}

.event-gps {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-bottom: 0.25rem;
    opacity: 0.8;
}

.event-item-reason {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
}

.event-item-weather {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.event-item-weather:empty {
    display: none;
}

.event-item-clips {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--accent);
    margin-top: 0.375rem;
    opacity: 0.8;
}

/* Empty events (no usable video clips) */
.event-item.event-empty {
    opacity: 0.5;
    position: relative;
}

.event-item.event-empty::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
        -45deg,
        transparent,
        transparent 8px,
        rgba(255, 59, 59, 0.05) 8px,
        rgba(255, 59, 59, 0.05) 16px
    );
    pointer-events: none;
    border-radius: 6px;
}

.event-item.event-empty:hover {
    opacity: 0.6;
}

.event-item.event-empty .event-item-clips .empty-warning {
    color: var(--danger);
    opacity: 1;
}

/* Empty event toast notification */
.empty-event-toast {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--bg-elevated);
    border: 1px solid var(--danger);
    border-radius: 8px;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 10000;
    box-shadow: 0 4px 20px rgba(255, 59, 59, 0.3);
    opacity: 0;
    transition: opacity 0.3s ease, transform 0.3s ease;
    font-size: 0.875rem;
}

.empty-event-toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

.empty-event-toast .toast-icon {
    font-size: 1.25rem;
    color: var(--danger);
}

.empty-event-toast .toast-message {
    color: var(--text-primary);
}

/* ==================== PLAYER AREA ==================== */
.player-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--bg-void);
    min-height: 0;
    overflow: hidden;
    position: relative;
    z-index: 1; /* Keep below sidebar (z-index: 200) on mobile */
}

/* Scan-line overlay for video area */
.video-grid-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.03) 2px,
        rgba(0, 0, 0, 0.03) 4px
    );
    pointer-events: none;
    z-index: 10;
}

.video-grid-container {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-void);
    min-height: 0;
    min-width: 0;
    overflow: hidden;
    position: relative;
}

.video-grid-container:has(.video-grid:not(.grid-2x2)),
.video-grid-container:has(.video-grid.layout-custom-config) {
    display: flex;
    align-items: center;
    justify-content: center;
}

.video-grid-placeholder {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-void);
    z-index: 1000;
    pointer-events: none;
}

.video-grid-placeholder.hidden {
    display: none;
}

.placeholder-content {
    text-align: center;
    color: var(--text-muted);
}

/* Video Grid */
.video-grid {
    position: relative;
    background: var(--bg-void);
    overflow: hidden;
    margin: auto;
    transition: all 0.3s ease;
}

.video-grid.grid-2x2 {
    display: grid;
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    aspect-ratio: 4 / 3;
    /* No gap - videos touch edge-to-edge, all dead space goes to outer edges */
}

/* Absolute positioned layouts - sizing handled by JavaScript for proper contain behavior */
.video-grid.layout-6-3,
.video-grid.layout-4-3,
.video-grid.layout-all-16-9,
.video-grid.layout-front-left,
.video-grid.layout-front-right,
.video-grid.layout-front-repeaters,
.video-grid.layout-focus,
.video-grid.layout-custom-config {
    /* JavaScript sets width/height to fit container while maintaining aspect ratio */
    max-width: 100%;
    max-height: 100%;
}

/* Layout: 6:3 */
.video-grid.layout-6-3 {
    aspect-ratio: 6 / 3;
}

.video-grid.layout-6-3 .video-container {
    position: absolute;
}

.video-grid.layout-6-3 .video-container:nth-child(1) {
    left: 20%; top: 0%; width: 60%; height: 55%; z-index: 15;
}

.video-grid.layout-6-3 .video-container:nth-child(2) {
    left: 24%; top: 55%; width: 52%; height: 45%; z-index: 20;
}

.video-grid.layout-6-3 .video-container:nth-child(3) {
    left: 54%; top: 51%; width: 46%; height: 49%; z-index: 10;
}

.video-grid.layout-6-3 .video-container:nth-child(4) {
    left: 0%; top: 51%; width: 46%; height: 49%; z-index: 10;
}

/* Layout: 4:3 */
.video-grid.layout-4-3 {
    aspect-ratio: 4 / 3;
}

.video-grid.layout-4-3 .video-container {
    position: absolute;
}

.video-grid.layout-4-3 .video-container:nth-child(1) {
    left: 18%; top: 1%; width: 64%; height: 68%; z-index: 10;
}

.video-grid.layout-4-3 .video-container:nth-child(2) {
    left: 39%; top: 0%; width: 22%; height: 25%; z-index: 20;
}

.video-grid.layout-4-3 .video-container:nth-child(3) {
    left: 55%; top: 55%; width: 45%; height: 45%; z-index: 5;
}

.video-grid.layout-4-3 .video-container:nth-child(4) {
    left: 0%; top: 55%; width: 45%; height: 45%; z-index: 5;
}

/* Layout: All 16:9 */
.video-grid.layout-all-16-9 {
    aspect-ratio: 16 / 9;
}

.video-grid.layout-all-16-9 .video-container {
    position: absolute;
}

.video-grid.layout-all-16-9 .video-container:nth-child(1) {
    left: 20%; top: 0%; width: 60%; height: 50%; z-index: 15;
}

.video-grid.layout-all-16-9 .video-container:nth-child(2) {
    left: 28%; top: 56%; width: 44%; height: 44%; z-index: 10;
}

.video-grid.layout-all-16-9 .video-container:nth-child(3) {
    left: 58%; top: 56%; width: 42%; height: 44%; z-index: 15;
}

.video-grid.layout-all-16-9 .video-container:nth-child(4) {
    left: 0%; top: 56%; width: 42%; height: 44%; z-index: 15;
}

/* Layout: Front & Left 8:3 */
.video-grid.layout-front-left {
    aspect-ratio: 8 / 3;
}

.video-grid.layout-front-left .video-container {
    position: absolute;
    top: 0%;
    height: 100%;
}

.video-grid.layout-front-left .video-container:nth-child(1) {
    left: 50%; width: 50%; z-index: 10;
}

.video-grid.layout-front-left .video-container:nth-child(2) {
    display: none;
}

.video-grid.layout-front-left .video-container:nth-child(3) {
    left: 0%; width: 50%; z-index: 10;
}

.video-grid.layout-front-left .video-container:nth-child(4) {
    display: none;
}

/* Layout: Front & Right 8:3 */
.video-grid.layout-front-right {
    aspect-ratio: 8 / 3;
}

.video-grid.layout-front-right .video-container {
    position: absolute;
    top: 0%;
    height: 100%;
}

.video-grid.layout-front-right .video-container:nth-child(1) {
    left: 0%; width: 50%; z-index: 10;
}

.video-grid.layout-front-right .video-container:nth-child(2) {
    display: none;
}

.video-grid.layout-front-right .video-container:nth-child(3) {
    display: none;
}

.video-grid.layout-front-right .video-container:nth-child(4) {
    left: 50%; width: 50%; z-index: 10;
}

/* Layout: Front & Repeaters 12:3 */
.video-grid.layout-front-repeaters {
    aspect-ratio: 12 / 3;
}

.video-grid.layout-front-repeaters .video-container {
    position: absolute;
    top: 0%;
    height: 100%;
}

.video-grid.layout-front-repeaters .video-container:nth-child(1) {
    left: 33.33%; width: 33.34%; z-index: 10;
}

.video-grid.layout-front-repeaters .video-container:nth-child(2) {
    display: none;
}

.video-grid.layout-front-repeaters .video-container:nth-child(3) {
    left: 0%; width: 33.33%; z-index: 10;
}

.video-grid.layout-front-repeaters .video-container:nth-child(4) {
    left: 66.67%; width: 33.33%; z-index: 10;
}

/* Layout: Focus Mode */
.video-grid.layout-focus {
    aspect-ratio: 4 / 3;
    width: 100%;
    max-width: 100%;
    max-height: 100%;
    position: relative;
}

.video-grid.layout-focus .video-container {
    display: none;
}

.video-grid.layout-focus .video-container.camera-focused {
    display: block;
    position: absolute;
    left: 0%; top: 0%; width: 100%; height: 100%; z-index: 100;
}

.video-container {
    position: relative;
    background: var(--bg-void);
    min-height: 0;
    min-width: 0;
    overflow: hidden;
    transition: opacity 0.3s ease;
}

.video-container.camera-hidden {
    display: none;
}

/* Drag & Drop states */
.video-container.dragging {
    opacity: 0.5;
    cursor: grabbing;
}

.video-container.drag-over {
    outline: 3px dashed var(--accent);
    outline-offset: -3px;
    background: rgba(0, 212, 255, 0.1);
}

.video-container[draggable="true"] {
    cursor: grab;
}

.video-container[draggable="true"]:active {
    cursor: grabbing;
}

.video-player {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: contain;
}

.video-label {
    position: absolute;
    top: 10px;
    left: 10px;
    background: var(--glass);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    color: var(--text-primary);
    padding: 0.3rem 0.75rem;
    border-radius: 4px;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    pointer-events: none;
    border: 1px solid var(--glass-border);
    text-transform: uppercase;
}

.video-label.ended {
    background: rgba(255, 59, 59, 0.85);
    border-color: var(--danger);
    box-shadow: 0 0 10px var(--danger-glow);
}

/* Camera Hide Button */
.camera-hide-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--glass);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid var(--glass-border);
    color: var(--text-secondary);
    padding: 6px;
    border-radius: 6px;
    cursor: pointer;
    opacity: 0;
    transition: all 0.2s ease;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
}

.video-container:hover .camera-hide-btn {
    opacity: 1;
}

.camera-hide-btn:hover {
    background: var(--bg-elevated);
    color: var(--danger);
    border-color: var(--danger);
}

/* Hidden Cameras Panel */
.hidden-cameras-panel {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--glass);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 8px;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    z-index: 100;
}

.hidden-cameras-panel.hidden {
    display: none;
}

.hidden-label {
    font-family: var(--font-ui);
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.hidden-cameras-list {
    display: flex;
    gap: 6px;
}

.hidden-camera-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: 4px 10px;
    border-radius: 4px;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 6px;
}

.hidden-camera-btn:hover {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
}

.hidden-camera-btn svg {
    width: 14px;
    height: 14px;
}

/* ==================== EVENT INFO BAR ==================== */
.event-info {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border);
    padding: 0.25rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.event-info-content {
    display: flex;
    gap: 1.5rem;
    align-items: center;
    flex: 1;
}

.event-date {
    font-family: var(--font-mono);
    font-weight: 600;
    font-size: 0.85rem;
    color: var(--accent);
}

.event-location {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.street-view-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 2px 4px;
    border-radius: 4px;
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    transition: all 0.15s ease;
    position: relative;
}

.street-view-btn:hover:not(:disabled) {
    color: var(--accent);
    background: rgba(var(--accent-rgb, 0, 212, 255), 0.15);
}

.street-view-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.street-view-btn svg {
    display: block;
}

/* Street View Tooltip */
.street-view-tooltip {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 11px;
    white-space: nowrap;
    z-index: 1000;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.street-view-tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: rgba(0, 0, 0, 0.9);
}

.street-view-btn:hover .street-view-tooltip {
    opacity: 1;
}

.street-view-tooltip .coords {
    color: var(--accent);
    font-family: var(--font-mono);
}

.street-view-tooltip .hint {
    color: rgba(255, 255, 255, 0.6);
    margin-top: 4px;
    font-size: 10px;
}

.event-reason {
    color: var(--text-muted);
    font-size: 0.8rem;
    font-style: italic;
}

.event-weather {
    color: var(--text-secondary);
    font-size: 0.8rem;
}

.event-weather:empty {
    display: none;
}

.event-info-notes-btn {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.event-info-notes-btn:hover:not(:disabled) {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
}

.event-info-notes-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.event-info-notes-btn svg {
    flex-shrink: 0;
}

.event-info-notes-btn.has-notes {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
}

/* ==================== TIMELINE ==================== */
/* Timeline row wrapper - contains bookmark controls, timeline, zoom controls */
.timeline-row {
    display: flex;
    align-items: center;
    background: var(--bg-secondary);
}

.timeline-container {
    flex: 1;
    padding: 0.25rem 0.75rem;
    overflow: visible;
}

.timeline-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.25rem;
}

.time-display {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--accent);
    text-shadow: 0 0 10px var(--accent-glow);
}

.speed-limit-display {
    display: none;
    align-items: center;
    margin-left: 0.5rem;
}

.speed-limit-display.visible {
    display: inline-flex;
}

/* US-style rectangular sign */
.speed-limit-display .limit-sign-us {
    width: 22px;
    height: 26px;
    border: 1.5px solid #000;
    border-radius: 2px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #fff;
    padding: 1px;
    box-sizing: border-box;
}

.speed-limit-display .limit-sign-us .limit-label {
    font-family: Arial, sans-serif;
    font-size: 4px;
    font-weight: 700;
    color: #000;
    text-transform: uppercase;
    line-height: 1;
    letter-spacing: -0.2px;
}

.speed-limit-display .limit-sign-us .limit-value {
    font-family: Arial, sans-serif;
    font-size: 11px;
    font-weight: 700;
    color: #000;
    line-height: 1;
}

/* European-style circular sign */
.speed-limit-display .limit-sign-eu {
    width: 22px;
    height: 22px;
    border: 2.5px solid #d32f2f;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    box-sizing: border-box;
}

.speed-limit-display .limit-sign-eu .limit-value {
    font-family: Arial, sans-serif;
    font-size: 10px;
    font-weight: 700;
    color: #000;
    line-height: 1;
}

.timeline {
    position: relative;
    height: 36px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    overflow: visible; /* Allow markers to extend outside */
}

/* Timeline gradient overlay */
.timeline::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 50%);
    pointer-events: none;
    border-radius: 6px;
}

.timeline-progress {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, var(--accent-subtle) 0%, var(--accent) 100%);
    border-radius: 6px 0 0 6px;
    width: 0%;
    transition: width 0.15s ease-out;
    pointer-events: none;
}

.timeline-scrubber {
    position: absolute;
    top: 50%;
    left: 0%;
    width: 14px;
    height: 14px;
    background: var(--accent);
    border: 2px solid var(--text-primary);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    cursor: grab;
    pointer-events: none;
    z-index: 10;
    box-shadow: 0 0 15px var(--accent-glow);
    transition: left 0.1s ease-out, transform 0.1s ease, box-shadow 0.2s ease;
}

.timeline-scrubber.dragging {
    cursor: grabbing;
    transform: translate(-50%, -50%) scale(1.3);
    box-shadow: 0 0 25px var(--accent);
    transition: transform 0.1s ease, box-shadow 0.2s ease; /* Disable left transition while dragging */
}

/* Disable transitions during seeking for responsive feel */
.timeline.seeking .timeline-progress,
.timeline.seeking .timeline-scrubber {
    transition: none !important;
}

.timeline-clips {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: visible; /* Allow markers to extend outside */
    transition: transform 0.15s ease-out;
}

/* Timeline Mini-map */
.timeline-minimap {
    position: relative;
    height: 20px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    margin-bottom: 6px;
    cursor: pointer;
    overflow: hidden;
}

.timeline-minimap.hidden {
    display: none;
}

.minimap-progress {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, var(--accent-subtle) 0%, rgba(0, 212, 255, 0.3) 100%);
    pointer-events: none;
    border-radius: 4px 0 0 4px;
    transition: width 0.15s ease-out;
}

.minimap-viewport {
    position: absolute;
    top: 0;
    height: 100%;
    background: rgba(0, 212, 255, 0.2);
    border: 2px solid var(--accent);
    border-radius: 3px;
    cursor: grab;
    transition: background 0.15s ease, left 0.15s ease-out, width 0.15s ease-out;
    box-shadow: 0 0 8px var(--accent-glow);
}

.minimap-viewport:hover {
    background: rgba(0, 212, 255, 0.3);
}

.minimap-viewport.dragging {
    cursor: grabbing;
    background: rgba(0, 212, 255, 0.4);
}

.minimap-position {
    position: absolute;
    top: 0;
    height: 100%;
    width: 2px;
    background: var(--text-primary);
    pointer-events: none;
    z-index: 5;
    box-shadow: 0 0 4px rgba(255, 255, 255, 0.5);
    transition: left 0.1s ease-out;
}

/* Minimap markers container */
.minimap-markers {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2;
}

.minimap-markers .minimap-clip-marker {
    position: absolute;
    top: 0;
    height: 100%;
    width: 1px;
    background: rgba(255, 255, 255, 0.3);
}

.minimap-markers .minimap-sentry-marker {
    position: absolute;
    top: 0;
    height: 100%;
    width: 3px;
    background: var(--danger);
    box-shadow: 0 0 4px var(--danger-glow);
}

.minimap-markers .minimap-bookmark-marker {
    position: absolute;
    top: 0;
    height: 100%;
    width: 2px;
    background: var(--warning);
    box-shadow: 0 0 3px var(--warning-glow);
}

.zoom-indicator {
    position: absolute;
    top: -20px;
    right: 0;
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--accent);
    background: var(--bg-tertiary);
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 600;
    pointer-events: none;
    border: 1px solid var(--border-accent);
}

.clip-marker {
    position: absolute;
    top: -6px;
    height: calc(100% + 12px);
    width: 1px;
    background: rgba(255, 255, 255, 0.2);
    pointer-events: auto;
}

.sentry-trigger-marker {
    position: absolute;
    top: -10px;
    height: calc(100% + 20px);
    width: 4px;
    background: var(--danger);
    z-index: 10;
    cursor: pointer;
    box-shadow: 0 0 12px var(--danger-glow), 0 0 20px var(--danger-glow);
    pointer-events: auto;
}

.sentry-trigger-marker::before {
    content: '!';
    position: absolute;
    top: -16px;
    left: 50%;
    transform: translateX(-50%);
    width: 18px;
    height: 18px;
    background: var(--danger);
    border-radius: 50%;
    font-size: 12px;
    font-weight: bold;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 8px var(--danger-glow);
}

.sentry-trigger-marker::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 8px solid var(--danger);
}

/* Gap markers - indicate missing footage */
.gap-marker {
    position: absolute;
    top: 2px;
    bottom: 2px;
    height: auto;
    width: 10px;
    background: repeating-linear-gradient(
        45deg,
        var(--warning),
        var(--warning) 2px,
        transparent 2px,
        transparent 4px
    );
    z-index: 4;
    cursor: help;
    border-radius: 2px;
    opacity: 0.85;
    transition: opacity 0.2s, transform 0.2s;
}

.gap-marker:hover {
    opacity: 1;
    transform: scaleX(1.3);
}

.gap-marker::after {
    content: attr(data-duration);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-elevated);
    color: var(--warning);
    font-size: 0.65rem;
    font-family: var(--font-mono);
    padding: 2px 6px;
    border-radius: 3px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
    border: 1px solid var(--warning);
    margin-bottom: 4px;
}

.gap-marker:hover::after {
    opacity: 1;
}

/* Near-miss markers - indicate potential incident detection */
.near-miss-marker {
    position: absolute;
    top: -8px;
    height: calc(100% + 16px);
    width: 4px;
    z-index: 9;
    cursor: pointer;
    border-radius: 2px;
    transition: all 0.15s ease;
    pointer-events: auto;
}

.near-miss-marker.severity-info {
    background: #ffc107;
    box-shadow: 0 0 6px rgba(255, 193, 7, 0.5);
}

.near-miss-marker.severity-warning {
    background: #ff9100;
    box-shadow: 0 0 8px rgba(255, 145, 0, 0.6);
}

.near-miss-marker.severity-critical {
    background: var(--danger);
    box-shadow: 0 0 12px var(--danger-glow), 0 0 20px var(--danger-glow);
}

.near-miss-marker:hover {
    transform: scaleX(1.5);
}

.near-miss-marker.severity-info:hover {
    background: #ffd54f;
    box-shadow: 0 0 15px rgba(255, 193, 7, 0.8);
}

.near-miss-marker.severity-warning:hover {
    background: #ffab40;
    box-shadow: 0 0 15px rgba(255, 145, 0, 0.8);
}

.near-miss-marker.severity-critical:hover {
    background: #ff5252;
    box-shadow: 0 0 20px var(--danger);
}

/* Near-miss marker icon */
.near-miss-marker::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 16px;
    height: 16px;
    background: inherit;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.near-miss-marker.severity-critical::before {
    box-shadow: 0 0 8px var(--danger-glow);
}

/* Near-miss minimap markers */
.minimap-markers .minimap-near-miss-marker {
    position: absolute;
    top: 0;
    height: 100%;
    width: 2px;
}

.minimap-markers .minimap-near-miss-marker.severity-info {
    background: #ffc107;
}

.minimap-markers .minimap-near-miss-marker.severity-warning {
    background: #ff9100;
    box-shadow: 0 0 3px rgba(255, 145, 0, 0.5);
}

.minimap-markers .minimap-near-miss-marker.severity-critical {
    background: var(--danger);
    box-shadow: 0 0 4px var(--danger-glow);
}

/* ==================== QUICK START GUIDE ==================== */
.quickstart-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.quickstart-modal.visible {
    opacity: 1;
}

.quickstart-modal.hidden {
    opacity: 0;
    pointer-events: none;
}

.quickstart-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(4px);
}

.quickstart-panel {
    position: relative;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 2.5rem;
    max-width: 480px;
    width: 90%;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.quickstart-skip {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 0.85rem;
    cursor: pointer;
    padding: 0.5rem;
    transition: color 0.2s;
}

.quickstart-skip:hover {
    color: var(--text-primary);
}

.quickstart-icon {
    font-size: 3.5rem;
    margin-bottom: 1rem;
}

.quickstart-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.quickstart-content {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 1.5rem;
    min-height: 100px;
}

.quickstart-content code {
    background: var(--bg-tertiary);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-family: var(--font-mono);
    font-size: 0.85rem;
}

.quickstart-content kbd {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 0.2rem 0.5rem;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    min-width: 2rem;
    text-align: center;
    display: inline-block;
}

.quickstart-content ul {
    list-style: disc;
}

.quickstart-content li {
    margin-bottom: 0.3rem;
}

.quickstart-progress {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
}

.quickstart-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.2s;
}

.quickstart-dot.active {
    background: var(--accent);
    border-color: var(--accent);
    transform: scale(1.2);
}

.quickstart-dot:hover {
    border-color: var(--accent);
}

.quickstart-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
}

.quickstart-btn {
    padding: 0.75rem 2rem;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    min-width: 120px;
}

.quickstart-btn.primary {
    background: var(--accent);
    color: var(--bg-primary);
    border: none;
}

.quickstart-btn.primary:hover {
    background: var(--accent-hover);
    transform: translateY(-1px);
}

.quickstart-btn.secondary {
    background: transparent;
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.quickstart-btn.secondary:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.bookmark-marker {
    position: absolute;
    top: -8px;
    height: calc(100% + 16px);
    width: 4px;
    background: var(--warning);
    z-index: 8;
    cursor: pointer;
    border-radius: 2px;
    transition: all 0.15s ease;
    box-shadow: 0 0 8px var(--warning-glow);
    pointer-events: auto;
}

.bookmark-marker:hover {
    background: #ffcc00;
    transform: scaleX(1.5);
    box-shadow: 0 0 15px var(--warning);
}

.bookmark-marker::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 10px solid var(--warning);
}

.bookmark-marker:hover::before {
    border-top-color: #ffcc00;
}

/* ==================== CONTROLS ==================== */
.controls {
    background: var(--bg-secondary);
    padding: 0.375rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
    justify-content: center;
}

.control-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    width: 36px;
    height: 36px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.control-btn:hover:not(:disabled) {
    background: var(--bg-elevated);
    border-color: var(--border-accent);
    color: var(--accent);
    box-shadow: 0 0 15px var(--accent-glow);
}

.control-btn:active:not(:disabled) {
    transform: scale(0.95);
}

.control-btn:disabled {
    opacity: 0.25;
    cursor: not-allowed;
}

.control-btn.active {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
    box-shadow: 0 0 15px var(--accent-glow);
}

.control-btn svg {
    width: 18px;
    height: 18px;
}

/* Control Groups */
.control-group {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.125rem 0.375rem;
    background: var(--bg-tertiary);
    border-radius: 8px;
    border: 1px solid var(--border);
}

.control-group .control-btn {
    border: none;
    background: transparent;
    width: 32px;
    height: 32px;
}

.control-group .control-btn:hover:not(:disabled) {
    background: var(--bg-elevated);
    box-shadow: none;
}

.control-group-playback {
    flex-shrink: 0;
}

.control-group-export {
    flex-shrink: 0;
}

.control-group-view {
    flex-shrink: 0;
}

.control-group-overlays {
    flex-shrink: 0;
    border-left: 1px solid var(--border);
    padding-left: 0.5rem;
    margin-left: 0.25rem;
}

.overlay-toggle-btn {
    width: 32px !important;
    height: 32px !important;
    min-width: 32px;
    padding: 0;
    border-radius: 6px;
    position: relative;
}

.overlay-toggle-btn svg {
    width: 18px;
    height: 18px;
}

.overlay-toggle-btn.active {
    background: var(--accent);
    color: #fff;
}

.overlay-toggle-btn.active:hover:not(:disabled) {
    background: var(--accent);
    filter: brightness(1.1);
}

/* Hidden controls (kept for keyboard shortcuts) */
.hidden-control {
    display: none !important;
}

/* Timeline Zoom Controls - vertical stack on right side of timeline row */
.timeline-zoom-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1px;
    padding: 0.125rem;
    background: var(--bg-tertiary);
    border-left: 1px solid var(--border);
}

.timeline-zoom-controls .control-btn.zoom-btn {
    width: 22px !important;
    height: 22px !important;
    min-width: 22px;
    min-height: 22px;
    padding: 0;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 4px;
}

.timeline-zoom-controls .control-btn.zoom-btn svg {
    width: 14px;
    height: 14px;
}

.timeline-zoom-controls .zoom-btn:hover:not(:disabled) {
    background: var(--bg-elevated);
    border-color: var(--accent);
}

.timeline-zoom-controls .zoom-btn svg {
    width: 14px;
    height: 14px;
}

/* Timeline Bookmark Controls - vertical stack on left side of timeline row */
.timeline-bookmark-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1px;
    padding: 0.125rem;
    background: var(--bg-tertiary);
    border-right: 1px solid var(--border);
}

.timeline-bookmark-controls .control-btn.bookmark-btn {
    width: 22px !important;
    height: 22px !important;
    min-width: 22px;
    min-height: 22px;
    padding: 0;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 4px;
}

.timeline-bookmark-controls .control-btn.bookmark-btn svg {
    width: 14px;
    height: 14px;
}

.timeline-bookmark-controls .bookmark-btn:hover:not(:disabled) {
    background: var(--bg-elevated);
    border-color: var(--accent);
}

.timeline-bookmark-controls .bookmark-btn svg {
    width: 14px;
    height: 14px;
}

/* Export dropdown enhancements */
.export-dropdown-divider {
    height: 1px;
    background: var(--border);
    margin: 0.5rem 0;
}

.export-option svg {
    flex-shrink: 0;
}

.export-option {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Loop button active state */
#loopBtn.active {
    color: var(--accent);
    background: var(--accent-subtle);
}

.event-nav-separator {
    width: 1px;
    height: 28px;
    background: linear-gradient(180deg, transparent 0%, var(--border) 50%, transparent 100%);
    margin: 0 0.375rem;
}

/* Bookmark Controls Group - keeps bookmark buttons together */
.bookmark-controls {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-shrink: 0;
}

/* Bookmarks Dropdown */
.bookmarks-dropdown-container {
    position: relative;
    display: inline-block;
}

.bookmarks-dropdown {
    position: absolute;
    bottom: 100%;
    left: 0;
    background: var(--glass);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    min-width: 260px;
    max-width: 350px;
    max-height: 300px;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    z-index: 10000;
    margin-bottom: 10px;
}

.bookmarks-dropdown.hidden {
    display: none;
}

.bookmarks-dropdown-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.875rem 1rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
    font-family: var(--font-ui);
    font-weight: 600;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.clear-all-btn {
    background: transparent;
    border: 1px solid var(--danger);
    color: var(--danger);
    padding: 0.3rem 0.625rem;
    border-radius: 4px;
    font-family: var(--font-ui);
    font-size: 0.7rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.clear-all-btn:hover {
    background: var(--danger);
    color: white;
    box-shadow: 0 0 10px var(--danger-glow);
}

.bookmarks-list {
    max-height: 220px;
    overflow-y: auto;
    padding: 0.5rem;
}

.bookmarks-list::-webkit-scrollbar {
    width: 5px;
}

.bookmarks-list::-webkit-scrollbar-track {
    background: transparent;
}

.bookmarks-list::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 3px;
}

.no-bookmarks {
    color: var(--text-muted);
    text-align: center;
    padding: 1.25rem;
    font-size: 0.85rem;
}

.bookmark-item {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    padding: 0.625rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.bookmark-item:hover {
    background: var(--bg-tertiary);
}

.bookmark-item-time {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--accent);
    min-width: 55px;
}

.bookmark-item-label {
    flex: 1;
    font-size: 0.85rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--text-secondary);
}

.bookmark-delete-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 5px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.bookmark-delete-btn:hover {
    color: var(--danger);
    background: var(--danger-glow);
}

/* Export Dropdown */
.export-dropdown-container {
    position: relative;
    display: inline-flex;
    align-items: center;
}

.export-dropdown-container .dropdown-toggle {
    padding: 0.375rem;
    min-width: 28px;
    margin-left: -1px;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

.export-dropdown-container #exportBtn {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.export-dropdown {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--glass);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    min-width: 260px;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    margin-bottom: 10px;
}

.export-dropdown.hidden {
    display: none;
}

.export-dropdown-header {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    padding: 0.625rem 0.875rem 0.375rem;
    border-bottom: 1px solid var(--border);
}

.export-option {
    display: block;
    width: 100%;
    padding: 0.625rem 0.875rem;
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 0.85rem;
    text-align: left;
    cursor: pointer;
    transition: all 0.15s ease;
}

.export-option:hover {
    background: var(--accent-subtle);
    color: var(--accent);
}

/* Export format row */
.export-format-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    cursor: default;
}

.export-format-row:hover {
    background: transparent;
    color: inherit;
}

.export-format-row label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.export-format-select {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    padding: 0.25rem 0.5rem;
    font-size: 0.8rem;
    cursor: pointer;
}

.export-format-select:hover {
    border-color: var(--accent);
}

.export-format-select:focus {
    outline: none;
    border-color: var(--accent);
}

/* Export action buttons (Screenshot, Export Video, Insurance Report) */
.export-action-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    width: calc(100% - 0.75rem);
    margin: 0.25rem 0.375rem;
    padding: 0.6rem 0.75rem;
    background: linear-gradient(135deg, rgba(74, 158, 255, 0.08), rgba(74, 158, 255, 0.02));
    border: none;
    border-left: 3px solid var(--accent);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.8rem;
    font-family: inherit;
    text-align: left;
    cursor: pointer;
    transition: all 0.15s ease;
}

.export-action-btn:hover {
    background: linear-gradient(135deg, rgba(74, 158, 255, 0.15), rgba(74, 158, 255, 0.05));
}

.export-action-btn svg {
    color: var(--accent);
    flex-shrink: 0;
    width: 16px;
    height: 16px;
}

/* Export Video + Format group */
.export-video-group {
    display: flex;
    align-items: stretch;
    margin: 0.25rem 0.375rem;
    width: calc(100% - 0.75rem);
    border-radius: 6px;
    overflow: hidden;
}

.export-video-group .export-action-btn {
    flex: 1;
    margin: 0;
    width: auto;
    border-radius: 0;
}

.export-video-group .export-format-select {
    background: var(--bg-tertiary);
    border: none;
    border-left: 1px solid var(--border);
    border-radius: 0;
    color: var(--text-secondary);
    padding: 0 0.625rem;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.15s ease;
}

.export-video-group .export-format-select:hover {
    background: var(--accent-subtle);
    color: var(--accent);
}

.export-video-group .export-format-select:focus {
    outline: none;
    background: var(--accent-subtle);
}

/* Export settings section */
.export-settings-header {
    font-size: 0.6rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    padding: 0.4rem 0.75rem 0.2rem;
    margin-top: 0.125rem;
}

/* Export checkbox options */
.export-checkbox-option {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    width: calc(100% - 0.75rem);
    margin: 0.25rem 0.375rem;
    padding: 0.4rem 0.75rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.15s ease;
}

.export-checkbox-option:hover {
    background: var(--accent-subtle);
}

.export-checkbox-option input[type="checkbox"] {
    display: none;
}

.export-checkbox-content {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
    flex: 1;
}

.export-checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-primary);
    font-size: 0.8rem;
    white-space: nowrap;
}

.export-checkbox-label::before {
    content: '';
    width: 14px;
    height: 14px;
    border: 1.5px solid var(--text-muted);
    border-radius: 3px;
    flex-shrink: 0;
    transition: all 0.15s ease;
}

.export-checkbox-option input:checked + .export-checkbox-label::before {
    background: var(--accent);
    border-color: var(--accent);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
    background-size: 10px;
    background-repeat: no-repeat;
    background-position: center;
}

.export-checkbox-option:hover .export-checkbox-label::before {
    border-color: var(--accent);
}

.export-option-hint {
    font-size: 0.65rem;
    color: var(--text-muted);
    line-height: 1.2;
    white-space: nowrap;
    text-align: right;
    flex-shrink: 0;
}

/* Privacy mode checkbox option (legacy - keep for compatibility) */
.privacy-mode-option {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 0.625rem 0.875rem;
    cursor: pointer;
    border-bottom: none !important;
}

.privacy-mode-option input[type="checkbox"] {
    display: none;
}

.privacy-mode-option > span:first-of-type {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-primary);
    font-size: 0.85rem;
}

.privacy-mode-option > span:first-of-type::before {
    content: '';
    width: 16px;
    height: 16px;
    border: 2px solid var(--text-muted);
    border-radius: 3px;
    flex-shrink: 0;
    transition: all 0.15s ease;
}

.privacy-mode-option input:checked + span::before {
    background: var(--accent);
    border-color: var(--accent);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
    background-size: 12px;
    background-repeat: no-repeat;
    background-position: center;
}

.privacy-mode-hint {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-left: 24px;
}

.privacy-mode-option:hover {
    background: var(--accent-subtle);
}

.privacy-mode-option:hover > span:first-of-type::before {
    border-color: var(--accent);
}

/* Layout name on second line in export dropdown */
.export-option .layout-name-line {
    display: block;
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: 0.125rem;
}

/* Speed & Layout Controls */
.speed-control,
.layout-control {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: 0.75rem;
    flex-shrink: 0;
}

.speed-label,
.layout-label {
    font-family: var(--font-ui);
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.speed-select,
.layout-select {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.5rem 0.75rem;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    cursor: pointer;
    outline: none;
    transition: all 0.2s ease;
}

.speed-select:hover:not(:disabled),
.layout-select:hover:not(:disabled) {
    background: var(--bg-elevated);
    border-color: var(--border-accent);
}

.speed-select:focus,
.layout-select:focus {
    border-color: var(--accent);
    box-shadow: 0 0 10px var(--accent-glow);
}

.speed-select:disabled,
.layout-select:disabled {
    opacity: 0.25;
    cursor: not-allowed;
}
.loop-control {
    display: flex;
    align-items: center;
    margin-left: 0.75rem;
    flex-shrink: 0;
}

.loop-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-family: var(--font-ui);
    font-size: 0.75rem;
    color: var(--text-muted);
    cursor: pointer;
    user-select: none;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.loop-label input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
    accent-color: var(--accent);
}

.loop-label input[type="checkbox"]:disabled {
    opacity: 0.25;
    cursor: not-allowed;
}

.loop-label:has(input:disabled) {
    cursor: not-allowed;
    opacity: 0.4;
}

.sync-status {
    margin-left: auto;
    position: relative;
}

.sync-indicator {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: var(--text-muted);
    cursor: help;
    transition: all 0.3s ease;
}

.sync-indicator.synced {
    background-color: var(--success);
    box-shadow: 0 0 12px var(--success-glow);
    animation: pulse-success 2s ease-in-out infinite;
}

.sync-indicator.drifted {
    background-color: var(--warning);
    box-shadow: 0 0 12px var(--warning-glow);
    animation: pulse-warning 1s ease-in-out infinite;
}

@keyframes pulse-success {
    0%, 100% { box-shadow: 0 0 8px var(--success-glow); }
    50% { box-shadow: 0 0 16px var(--success); }
}

@keyframes pulse-warning {
    0%, 100% { box-shadow: 0 0 8px var(--warning-glow); }
    50% { box-shadow: 0 0 16px var(--warning); }
}

.sync-status::before {
    content: 'Sync: ' attr(data-status);
    position: absolute;
    bottom: 100%;
    right: 0;
    background: var(--glass);
    backdrop-filter: blur(10px);
    color: var(--text-primary);
    padding: 0.5rem 0.875rem;
    border-radius: 6px;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    margin-bottom: 0.5rem;
    border: 1px solid var(--border);
}

.sync-status:hover::before {
    opacity: 1;
}

/* ==================== LOADING OVERLAY ==================== */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(6, 8, 12, 0.95);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    backdrop-filter: blur(10px);
}

.loading-overlay.hidden {
    display: none;
}

.loading-spinner {
    width: 50px;
    height: 50px;
    border: 3px solid var(--bg-elevated);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    box-shadow: 0 0 30px var(--accent-glow);
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading-text {
    margin-top: 1.25rem;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    color: var(--text-secondary);
    letter-spacing: 0.05em;
}

/* ==================== BUFFERING INDICATOR ==================== */
.buffering-indicator {
    position: fixed;
    top: 80px;
    right: 20px;
    background: rgba(6, 8, 12, 0.95);
    border: 1px solid var(--warning);
    border-radius: 8px;
    padding: 12px 16px;
    z-index: 1500;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 20px var(--warning-glow);
    min-width: 180px;
    animation: bufferSlideIn 0.3s ease;
}

@keyframes bufferSlideIn {
    from {
        opacity: 0;
        transform: translateX(20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.buffering-indicator.hidden {
    display: none;
}

.buffering-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.buffering-spinner {
    width: 16px;
    height: 16px;
    border: 2px solid var(--bg-elevated);
    border-top-color: var(--warning);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    flex-shrink: 0;
}

.buffering-text {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--warning);
}

#bufferingLabel {
    font-weight: 500;
}

.buffering-speed {
    color: var(--text-secondary);
    font-size: 0.75rem;
}

.buffer-health-bar {
    width: 100%;
    height: 4px;
    background: var(--bg-elevated);
    border-radius: 2px;
    overflow: hidden;
}

.buffer-health-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--danger), var(--warning), var(--success));
    border-radius: 2px;
    transition: width 0.3s ease;
    width: 100%;
}

/* ==================== SELECT FOLDER BUTTON ==================== */
.select-folder-btn {
    width: 100%;
    padding: 0.875rem 1rem;
    margin: 0.5rem 0;
    background: linear-gradient(135deg, var(--accent) 0%, #0099cc 100%);
    color: var(--bg-void);
    border: none;
    border-radius: 8px;
    font-family: var(--font-ui);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.25s ease;
    box-shadow: 0 0 20px var(--accent-glow);
    letter-spacing: 0.02em;
}

.select-folder-btn:hover {
    background: linear-gradient(135deg, var(--accent-hover) 0%, var(--accent) 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 30px var(--accent-glow);
}

.select-folder-btn.hidden {
    display: none;
}

/* Tab Content */
.tab-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.tab-pane {
    display: none;
    flex: 1;
    flex-direction: column;
    min-height: 0;
}

.tab-pane.active {
    display: flex;
}

/* ==================== FILTER PANEL ==================== */
.filter-panel {
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border);
}

.filter-header {
    padding: 0.75rem 1rem;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    transition: background-color 0.2s ease;
}

.filter-header:hover {
    background: var(--bg-tertiary);
}

.filter-header-content {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    font-family: var(--font-ui);
    font-weight: 600;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
}

.filter-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    background: var(--accent);
    color: var(--bg-void);
    border-radius: 10px;
    font-family: var(--font-mono);
    font-size: 0.7rem;
    font-weight: 600;
    box-shadow: 0 0 8px var(--accent-glow);
}

.collapse-icon {
    color: var(--text-muted);
    font-size: 0.75rem;
    transition: transform 0.3s ease;
}

.filter-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.filter-content.expanded {
    max-height: 500px;
    overflow-y: auto;
}

.filter-group {
    padding: 0.875rem 1rem;
    border-top: 1px solid var(--border);
}

.filter-label {
    display: block;
    font-family: var(--font-ui);
    font-size: 0.75rem;
    font-weight: 600;
    margin-bottom: 0.625rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.filter-checkboxes {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.filter-checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    font-size: 0.85rem;
    color: var(--text-secondary);
    transition: color 0.2s ease;
}

.filter-checkbox-label:hover {
    color: var(--text-primary);
}

.filter-checkbox-label input[type="checkbox"] {
    cursor: pointer;
    accent-color: var(--accent);
    width: 15px;
    height: 15px;
}

.filter-select,
.search-input,
.date-input {
    width: 100%;
    padding: 0.625rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-family: var(--font-ui);
    font-size: 0.85rem;
    transition: all 0.2s ease;
}

.filter-select:focus,
.search-input:focus,
.date-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 10px var(--accent-glow);
}

.search-input::placeholder {
    color: var(--text-muted);
}

.date-range-inputs {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.date-input {
    flex: 1;
    font-size: 0.8rem;
}

.date-separator {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.clear-dates-btn,
.clear-all-filters-btn {
    margin-top: 0.625rem;
    padding: 0.5rem 0.875rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-muted);
    font-family: var(--font-ui);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.clear-dates-btn:hover,
.clear-all-filters-btn:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
    border-color: var(--border-accent);
}

.clear-all-filters-btn {
    width: 100%;
    color: var(--accent);
    font-weight: 600;
}

/* ==================== MAP ==================== */
#map {
    width: 100%;
    height: 100%;
    background: var(--bg-tertiary);
}

.map-popup {
    min-width: 200px;
    font-family: var(--font-ui);
}

.map-popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.25rem;
}

.map-popup-date {
    font-size: 0.8rem;
    color: #666;
}

.map-popup-time {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.map-popup-location {
    font-size: 0.85rem;
    color: #444;
    margin-bottom: 0.25rem;
}

.map-popup-reason {
    font-size: 0.8rem;
    color: #666;
    font-style: italic;
    margin-bottom: 0.25rem;
}

.map-popup-clips {
    font-size: 0.75rem;
    color: #666;
    margin-bottom: 0.5rem;
}

.map-popup-action {
    font-size: 0.8rem;
    color: #00b4d8;
    font-weight: 600;
    text-align: center;
    padding-top: 0.5rem;
    border-top: 1px solid #e0e0e0;
}

.custom-marker-icon {
    background: transparent;
    border: none;
}

.leaflet-popup-content-wrapper {
    background: #fff;
    border-radius: 10px;
    box-shadow: var(--shadow-md);
}

.leaflet-popup-tip {
    background: #fff;
}

/* Leaflet Zoom Controls - Base styles */
.leaflet-control-zoom {
    border: none !important;
    border-radius: 6px !important;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15) !important;
}

.leaflet-control-zoom a,
.leaflet-control-zoom a:hover {
    background: #ffffff !important;
    color: #333333 !important;
    border: none !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
    width: 30px !important;
    height: 30px !important;
    line-height: 30px !important;
    font-size: 18px !important;
    font-weight: normal !important;
}

.leaflet-control-zoom a:last-child {
    border-bottom: none !important;
}

.leaflet-control-zoom a:hover {
    background: #f0f0f0 !important;
    color: #0066cc !important;
}

/* Leaflet Attribution - Light Mode (default) */
.leaflet-control-attribution {
    background: rgba(255, 255, 255, 0.85) !important;
    color: #666666 !important;
    font-size: 10px !important;
}

.leaflet-control-attribution a {
    color: #333333 !important;
}

/* Map Control Buttons - Light Mode Base (default) */
.heatmap-control,
.struggle-zones-control,
.incident-control,
.dark-mode-control,
.scan-all-control {
    background: #ffffff !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.heatmap-toggle-btn,
.struggle-zones-toggle-btn,
.incident-toggle-btn,
.dark-mode-toggle-btn,
.scan-all-btn {
    color: #666666 !important;
}

.heatmap-toggle-btn:hover,
.struggle-zones-toggle-btn:hover,
.incident-toggle-btn:hover,
.dark-mode-toggle-btn:hover,
.scan-all-btn:hover {
    background: #f0f0f0 !important;
    color: #0066cc !important;
}

/* ========== Map Dark Mode (when map tiles are dark) ========== */
.map-dark-mode .leaflet-control-zoom {
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3) !important;
}

.map-dark-mode .leaflet-control-zoom a,
.map-dark-mode .leaflet-control-zoom a:hover {
    background: #2d2d2d !important;
    color: #aaaaaa !important;
    border-bottom: 1px solid #3a3a3a !important;
}

.map-dark-mode .leaflet-control-zoom a:hover {
    background: #3a3a3a !important;
    color: #4a9eff !important;
}

.map-dark-mode .leaflet-control-attribution {
    background: rgba(45, 45, 45, 0.8) !important;
    color: #666666 !important;
}

.map-dark-mode .leaflet-control-attribution a {
    color: #aaaaaa !important;
}

.map-dark-mode .heatmap-control,
.map-dark-mode .struggle-zones-control,
.map-dark-mode .incident-control,
.map-dark-mode .dark-mode-control,
.map-dark-mode .scan-all-control {
    background: #2d2d2d !important;
    border: 1px solid #3a3a3a !important;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.map-dark-mode .heatmap-toggle-btn,
.map-dark-mode .struggle-zones-toggle-btn,
.map-dark-mode .incident-toggle-btn,
.map-dark-mode .dark-mode-toggle-btn,
.map-dark-mode .scan-all-btn {
    color: #aaaaaa !important;
}

.map-dark-mode .heatmap-toggle-btn:hover,
.map-dark-mode .struggle-zones-toggle-btn:hover,
.map-dark-mode .incident-toggle-btn:hover,
.map-dark-mode .dark-mode-toggle-btn:hover,
.map-dark-mode .scan-all-btn:hover {
    background: #3a3a3a !important;
    color: #4a9eff !important;
}

/* Legacy - Map Control Buttons structure */
.heatmap-control,
.struggle-zones-control,
.incident-control,
.dark-mode-control,
.scan-all-control {
    border: 1px solid var(--border, #3a3a3a) !important;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

/* Override Leaflet default focus/active states for custom controls */
.leaflet-bar a.heatmap-toggle-btn,
.leaflet-bar a.struggle-zones-toggle-btn,
.leaflet-bar a.incident-toggle-btn,
.leaflet-bar a.dark-mode-toggle-btn,
.leaflet-bar a.scan-all-btn {
    background: transparent !important;
}

.leaflet-bar a.heatmap-toggle-btn:focus,
.leaflet-bar a.struggle-zones-toggle-btn:focus,
.leaflet-bar a.incident-toggle-btn:focus,
.leaflet-bar a.dark-mode-toggle-btn:focus,
.leaflet-bar a.scan-all-btn:focus {
    background: var(--bg-tertiary, #3a3a3a) !important;
    outline: none;
}

.leaflet-bar a.heatmap-toggle-btn.active,
.leaflet-bar a.heatmap-toggle-btn.active:focus,
.leaflet-bar a.heatmap-toggle-btn.active:hover {
    background: var(--accent, #4a9eff) !important;
    color: white !important;
}

.leaflet-bar a.struggle-zones-toggle-btn.active,
.leaflet-bar a.struggle-zones-toggle-btn.active:focus,
.leaflet-bar a.struggle-zones-toggle-btn.active:hover {
    background: #ff9800 !important;
    color: white !important;
}

.leaflet-bar a.incident-toggle-btn.active,
.leaflet-bar a.incident-toggle-btn.active:focus,
.leaflet-bar a.incident-toggle-btn.active:hover {
    background: #f44336 !important;
    color: white !important;
}

.leaflet-bar a.dark-mode-toggle-btn.active,
.leaflet-bar a.dark-mode-toggle-btn.active:focus,
.leaflet-bar a.dark-mode-toggle-btn.active:hover {
    background: #5c6bc0 !important;
    color: white !important;
}

/* Scan All Events Control */
.scan-all-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    color: var(--text-secondary, #aaa);
    text-decoration: none;
    transition: all 0.2s ease;
    border-radius: 5px;
}

.scan-all-btn:hover {
    background: var(--bg-tertiary, #3a3a3a);
    color: var(--accent, #4a9eff);
}

.scan-all-btn.scanning {
    background: #2196f3 !important;
    color: white !important;
    animation: pulse-scan 1.5s ease-in-out infinite;
}

.scan-all-btn.scanning svg {
    animation: rotate-scan 2s linear infinite;
}

@keyframes pulse-scan {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

@keyframes rotate-scan {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Heatmap Toggle Control */
.heatmap-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    color: var(--text-secondary, #aaa);
    text-decoration: none;
    transition: all 0.2s ease;
    border-radius: 5px;
}

.heatmap-toggle-btn:hover {
    background: var(--bg-tertiary, #3a3a3a);
    color: var(--accent, #4a9eff);
}

.heatmap-toggle-btn.active {
    background: var(--accent);
    color: white;
}

.heatmap-toggle-btn.active:hover {
    background: var(--accent-hover);
}

.heatmap-toggle-btn svg {
    pointer-events: none;
}

.heatmap-toggle-btn.loading {
    opacity: 0.7;
    cursor: wait;
}

.heatmap-toggle-btn.loading svg {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Struggle Zones Toggle Control */
.struggle-zones-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    color: #ff9800;
    text-decoration: none;
    transition: all 0.2s ease;
    border-radius: 5px;
}

.struggle-zones-toggle-btn:hover {
    background: rgba(255, 152, 0, 0.15);
    color: #ffb74d;
}

.struggle-zones-toggle-btn.active {
    background: #ff9800;
    color: white;
}

.struggle-zones-toggle-btn.active:hover {
    background: #f57c00;
}

.struggle-zones-toggle-btn svg {
    pointer-events: none;
}

.struggle-zones-toggle-btn.loading {
    opacity: 0.7;
    cursor: wait;
}

.struggle-zones-toggle-btn.loading svg {
    animation: spin 1s linear infinite;
}

/* Dark Mode Toggle Control */
.dark-mode-control {
    margin-top: 10px;
}

.dark-mode-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    color: var(--text-secondary, #aaa);
    text-decoration: none;
    transition: all 0.2s ease;
    border-radius: 5px;
}

.dark-mode-toggle-btn:hover {
    background: var(--bg-tertiary, #3a3a3a);
    color: #ffc107;
}

.dark-mode-toggle-btn.active {
    background: #424242;
    color: #ffc107;
}

.dark-mode-toggle-btn.active:hover {
    background: #333;
}

.dark-mode-toggle-btn svg {
    pointer-events: none;
}

/* Struggle Zone Icons */
.struggle-zone-icon {
    background: transparent;
    border: none;
}

.struggle-zone-cluster-icon {
    background: transparent;
    border: none;
}

.struggle-zone-cluster {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, #ff9800, #f44336);
    border: 2px solid white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Struggle Zone Popup */
.struggle-zone-popup {
    min-width: 280px;
    max-width: 350px;
    font-family: var(--font-ui);
}

.struggle-zone-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    padding-bottom: 8px;
    border-bottom: 1px solid #e0e0e0;
}

.struggle-zone-title {
    font-size: 14px;
    font-weight: 600;
    color: #f44336;
}

.struggle-zone-count {
    font-size: 20px;
    font-weight: bold;
    color: #333;
    margin-bottom: 8px;
}

.struggle-zone-breakdown {
    margin-bottom: 12px;
}

.struggle-zone-breakdown .breakdown-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
}

.struggle-zone-breakdown label {
    font-size: 11px;
    color: #666;
    min-width: 80px;
}

.struggle-zone-type {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
}

.struggle-zone-type.saved {
    background: #e3f2fd;
    color: #1565c0;
}

.struggle-zone-type.sentry {
    background: #ffebee;
    color: #c62828;
}

.struggle-zone-type.recent {
    background: #f5f5f5;
    color: #616161;
}

.struggle-zone-state {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
    background: #e8f5e9;
    color: #2e7d32;
}

.struggle-zone-events-header {
    font-size: 11px;
    font-weight: 600;
    color: #666;
    margin-bottom: 6px;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid #e0e0e0;
}

.struggle-zone-events {
    max-height: 150px;
    overflow-y: auto;
}

.struggle-zone-event {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 0;
    border-bottom: 1px solid #f5f5f5;
    font-size: 11px;
}

.struggle-zone-event:last-child {
    border-bottom: none;
}

.struggle-zone-event .event-date {
    color: #666;
    flex: 1;
}

.struggle-zone-event .event-from-state {
    background: #fff3e0;
    color: #e65100;
    padding: 1px 6px;
    border-radius: 8px;
    font-size: 9px;
    font-weight: 600;
    margin: 0 6px;
}

.struggle-zone-event .event-speed {
    color: #333;
    font-weight: 500;
    min-width: 50px;
    text-align: right;
}

.struggle-zone-more {
    font-size: 10px;
    color: #999;
    font-style: italic;
    padding-top: 4px;
}

.struggle-zone-tip {
    margin-top: 10px;
    padding-top: 8px;
    border-top: 1px solid #e0e0e0;
}

.struggle-zone-tip small {
    font-size: 10px;
    color: #888;
    font-style: italic;
}

/* Clickable struggle zone events */
.struggle-zone-event.clickable {
    cursor: pointer;
    transition: background-color 0.15s ease;
    padding: 6px 4px;
    margin: 0 -4px;
    border-radius: 4px;
}

.struggle-zone-event.clickable:hover {
    background: #fff3e0;
}

.struggle-zone-event .event-view-icon {
    color: #999;
    opacity: 0;
    transition: opacity 0.15s ease;
    margin-left: 4px;
}

.struggle-zone-event.clickable:hover .event-view-icon {
    opacity: 1;
    color: #ff9800;
}

/* Direction indicator in popup header */
.struggle-zone-direction {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    color: #666;
    margin-left: auto;
    background: #f5f5f5;
    padding: 2px 8px;
    border-radius: 12px;
}

.struggle-zone-direction svg {
    color: #ff9800;
}

/* ==================== PHANTOM BRAKE HOTSPOTS ==================== */

/* Phantom Brake Toggle Control */
.incident-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    color: #f44336;
    transition: all 0.2s ease;
    border-radius: 5px;
}

.incident-toggle-btn:hover {
    background: rgba(244, 67, 54, 0.15);
    color: #ef5350;
}

.incident-toggle-btn.active {
    background: #f44336;
    color: white;
}

.incident-toggle-btn.active:hover {
    background: #d32f2f;
}

.incident-toggle-btn svg {
    pointer-events: none;
}

.incident-toggle-btn.loading {
    opacity: 0.7;
    cursor: wait;
}

.incident-toggle-btn.loading svg {
    animation: spin 1s linear infinite;
}

/* Phantom Brake Icons */
.incident-icon {
    background: transparent;
    border: none;
}

.incident-cluster-icon {
    background: transparent;
    border: none;
}

.incident-cluster {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, #f44336, #b71c1c);
    border: 2px solid white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 12px;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(183, 28, 28, 0.4);
}

/* Phantom Brake Popup */
.incident-popup {
    min-width: 280px;
    max-width: 350px;
    font-family: var(--font-ui);
}

.incident-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    padding-bottom: 8px;
    border-bottom: 1px solid #ffcdd2;
}

.incident-title {
    font-size: 14px;
    font-weight: 600;
    color: #b71c1c;
}

.incident-count {
    font-size: 20px;
    font-weight: bold;
    color: #333;
    margin-bottom: 8px;
}

.incident-breakdown {
    margin-bottom: 12px;
}

.incident-breakdown .breakdown-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
}

.incident-breakdown label {
    font-size: 11px;
    color: #666;
}

.incident-severity {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
}

.incident-severity.critical {
    background: #ffebee;
    color: #b71c1c;
}

.incident-severity.warning {
    background: #fff3e0;
    color: #e65100;
}

.incident-severity.info {
    background: #fff8e1;
    color: #ff8f00;
}

.incident-ap-mode {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
    background: #e3f2fd;
    color: #1565c0;
}

.incident-type {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
}

.incident-type.braking {
    background: #ffebee;
    color: #c62828;
}

.incident-type.swerve {
    background: #e0f7fa;
    color: #00838f;
}

.incident-type.combined {
    background: #fff3e0;
    color: #e65100;
}

.event-type {
    font-size: 9px;
    font-weight: 600;
    padding: 1px 4px;
    border-radius: 3px;
    background: rgba(0, 0, 0, 0.05);
    color: #666;
}

.incident-events-header {
    font-size: 11px;
    font-weight: 600;
    color: #666;
    margin-bottom: 6px;
    margin-top: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.incident-events {
    max-height: 150px;
    overflow-y: auto;
}

.incident-event {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 0;
    border-bottom: 1px solid #f5f5f5;
    font-size: 11px;
    gap: 6px;
}

.incident-event:last-child {
    border-bottom: none;
}

.incident-event .event-date {
    color: #666;
    flex: 1;
    min-width: 80px;
}

.incident-event .event-severity {
    padding: 1px 6px;
    border-radius: 8px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
}

.incident-event .event-severity.critical {
    background: #ffcdd2;
    color: #b71c1c;
}

.incident-event .event-severity.warning {
    background: #ffe0b2;
    color: #e65100;
}

.incident-event .event-severity.info {
    background: #fff8e1;
    color: #ff8f00;
}

.incident-event .event-speed {
    color: #333;
    font-weight: 500;
    min-width: 45px;
    text-align: right;
}

.incident-event .event-gforce {
    color: #b71c1c;
    font-weight: 600;
    min-width: 40px;
    text-align: right;
}

.incident-more {
    font-size: 10px;
    color: #999;
    font-style: italic;
    padding-top: 4px;
}

.incident-tip {
    margin-top: 10px;
    padding-top: 8px;
    border-top: 1px solid #ffcdd2;
}

.incident-tip small {
    font-size: 10px;
    color: #888;
    font-style: italic;
}

/* Clickable phantom brake events */
.incident-event.clickable {
    cursor: pointer;
    transition: background-color 0.15s ease;
    padding: 6px 4px;
    margin: 0 -4px;
    border-radius: 4px;
}

.incident-event.clickable:hover {
    background: #ffebee;
}

.incident-event .event-view-icon {
    color: #999;
    opacity: 0;
    transition: opacity 0.15s ease;
    margin-left: 4px;
}

.incident-event.clickable:hover .event-view-icon {
    opacity: 1;
    color: #f44336;
}

/* ==================== MODALS ==================== */
.settings-modal,
.help-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.settings-modal.hidden,
.help-modal.hidden {
    display: none;
}

.settings-overlay,
.help-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
}

.settings-panel {
    position: relative;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 16px;
    width: 90%;
    max-width: 720px;
    height: 80vh;
    max-height: 600px;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-lg), 0 0 60px rgba(0, 212, 255, 0.1);
    overflow: hidden;
}

.help-panel {
    position: relative;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 16px;
    width: 90%;
    max-width: 600px;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-lg), 0 0 60px rgba(0, 212, 255, 0.1);
}

.help-panel {
    max-width: 600px;
}

.help-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid var(--border);
}

.help-header h2 {
    font-family: var(--font-ui);
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.settings-close-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.375rem;
    border-radius: 6px;
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.settings-close-btn:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.help-close-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 8px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.help-close-btn:hover {
    color: var(--accent);
    border-color: var(--border-accent);
}

/* Settings Layout - Modern Sidebar */
.settings-layout {
    display: flex;
    flex: 1;
    overflow: hidden;
}

.settings-sidebar {
    width: 200px;
    min-width: 200px;
    background: var(--bg-tertiary);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
}

.settings-sidebar-header {
    padding: 1.25rem 1rem;
    border-bottom: 1px solid var(--border);
}

.settings-sidebar-header h2 {
    font-family: var(--font-ui);
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
    color: var(--text-primary);
}

.settings-nav {
    flex: 1;
    padding: 0.75rem 0.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.settings-nav-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 0.875rem;
    background: transparent;
    border: none;
    border-radius: 8px;
    color: var(--text-secondary);
    font-family: var(--font-ui);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: left;
    width: 100%;
}

.settings-nav-item:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.settings-nav-item.active {
    background: var(--accent-subtle);
    color: var(--accent);
}

.settings-nav-item svg {
    opacity: 0.6;
    flex-shrink: 0;
    transition: opacity 0.15s ease;
}

.settings-nav-item:hover svg,
.settings-nav-item.active svg {
    opacity: 1;
}

.settings-nav-item span {
    flex: 1;
}

.settings-sidebar-footer {
    padding: 0.75rem;
    border-top: 1px solid var(--border);
}

.settings-reset-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
    padding: 0.5rem 0.75rem;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-muted);
    font-family: var(--font-ui);
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
}

.settings-reset-btn:hover {
    background: var(--bg-secondary);
    border-color: var(--text-muted);
    color: var(--text-secondary);
}

.settings-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;
}

.settings-main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border);
    background: var(--bg-secondary);
}

.settings-section-title {
    font-family: var(--font-ui);
    font-size: 0.9rem;
    font-weight: 600;
    margin: 0;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Settings Tab Content */
.settings-tab-content {
    display: none;
}

.settings-tab-content.active {
    display: block;
}

.settings-content {
    flex: 1;
    overflow-y: auto;
    padding: 1rem 1.25rem 1.5rem;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) transparent;
}

.help-content {
    flex: 1;
    overflow-y: auto;
    padding: 1.25rem 1.5rem;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) transparent;
}

.settings-content::-webkit-scrollbar {
    width: 6px;
}

.settings-content::-webkit-scrollbar-track {
    background: transparent;
}

.settings-content::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 3px;
}

.settings-content::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
}

.help-content::-webkit-scrollbar {
    width: 8px;
}

.help-content::-webkit-scrollbar-track {
    background: transparent;
}

.help-content::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: padding-box;
}

.help-content::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
    border: 2px solid transparent;
    background-clip: padding-box;
}

/* --- Global themed scrollbar for modal content areas --- */
.themed-scrollbar,
.stats-content,
.notes-content,
.filter-content,
.layout-preset-list,
.quick-start-content,
.changelog-content,
.version-changelog,
.insurance-content,
.export-modal-content,
.clip-info-content,
.plate-results-thumbnails,
.region-list {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) transparent;
}

.themed-scrollbar::-webkit-scrollbar,
.stats-content::-webkit-scrollbar,
.notes-content::-webkit-scrollbar,
.filter-content::-webkit-scrollbar,
.layout-preset-list::-webkit-scrollbar,
.quick-start-content::-webkit-scrollbar,
.changelog-content::-webkit-scrollbar,
.changelog-body::-webkit-scrollbar,
.version-changelog::-webkit-scrollbar,
.insurance-content::-webkit-scrollbar,
.export-modal-content::-webkit-scrollbar,
.clip-info-content::-webkit-scrollbar,
.plate-results-thumbnails::-webkit-scrollbar,
.region-list::-webkit-scrollbar,
.modal-content::-webkit-scrollbar,
.bottom-sheet-content::-webkit-scrollbar,
.diagnostic-modal-body::-webkit-scrollbar,
.layout-editor-properties::-webkit-scrollbar,
.layout-editor-saved-list::-webkit-scrollbar,
.session-modal-panel::-webkit-scrollbar,
.stats-nav::-webkit-scrollbar,
.struggle-zone-events::-webkit-scrollbar,
.incident-events::-webkit-scrollbar,
.sync-modal-body::-webkit-scrollbar,
.sync-category-items::-webkit-scrollbar,
.sync-presets-list::-webkit-scrollbar,
.sync-results-scroll::-webkit-scrollbar,
.sync-stats-content::-webkit-scrollbar,
.sync-stats-inline::-webkit-scrollbar,
.sync-stats-table-container::-webkit-scrollbar,
.tag-suggestions::-webkit-scrollbar {
    width: 6px;
}

.themed-scrollbar::-webkit-scrollbar-track,
.stats-content::-webkit-scrollbar-track,
.notes-content::-webkit-scrollbar-track,
.filter-content::-webkit-scrollbar-track,
.layout-preset-list::-webkit-scrollbar-track,
.quick-start-content::-webkit-scrollbar-track,
.changelog-content::-webkit-scrollbar-track,
.changelog-body::-webkit-scrollbar-track,
.version-changelog::-webkit-scrollbar-track,
.insurance-content::-webkit-scrollbar-track,
.export-modal-content::-webkit-scrollbar-track,
.clip-info-content::-webkit-scrollbar-track,
.plate-results-thumbnails::-webkit-scrollbar-track,
.region-list::-webkit-scrollbar-track,
.modal-content::-webkit-scrollbar-track,
.bottom-sheet-content::-webkit-scrollbar-track,
.diagnostic-modal-body::-webkit-scrollbar-track,
.layout-editor-properties::-webkit-scrollbar-track,
.layout-editor-saved-list::-webkit-scrollbar-track,
.session-modal-panel::-webkit-scrollbar-track,
.stats-nav::-webkit-scrollbar-track,
.struggle-zone-events::-webkit-scrollbar-track,
.incident-events::-webkit-scrollbar-track,
.sync-modal-body::-webkit-scrollbar-track,
.sync-category-items::-webkit-scrollbar-track,
.sync-presets-list::-webkit-scrollbar-track,
.sync-results-scroll::-webkit-scrollbar-track,
.sync-stats-content::-webkit-scrollbar-track,
.sync-stats-inline::-webkit-scrollbar-track,
.sync-stats-table-container::-webkit-scrollbar-track,
.tag-suggestions::-webkit-scrollbar-track {
    background: transparent;
}

.themed-scrollbar::-webkit-scrollbar-thumb,
.stats-content::-webkit-scrollbar-thumb,
.notes-content::-webkit-scrollbar-thumb,
.filter-content::-webkit-scrollbar-thumb,
.layout-preset-list::-webkit-scrollbar-thumb,
.quick-start-content::-webkit-scrollbar-thumb,
.changelog-content::-webkit-scrollbar-thumb,
.changelog-body::-webkit-scrollbar-thumb,
.version-changelog::-webkit-scrollbar-thumb,
.insurance-content::-webkit-scrollbar-thumb,
.export-modal-content::-webkit-scrollbar-thumb,
.clip-info-content::-webkit-scrollbar-thumb,
.plate-results-thumbnails::-webkit-scrollbar-thumb,
.region-list::-webkit-scrollbar-thumb,
.modal-content::-webkit-scrollbar-thumb,
.bottom-sheet-content::-webkit-scrollbar-thumb,
.diagnostic-modal-body::-webkit-scrollbar-thumb,
.layout-editor-properties::-webkit-scrollbar-thumb,
.layout-editor-saved-list::-webkit-scrollbar-thumb,
.session-modal-panel::-webkit-scrollbar-thumb,
.stats-nav::-webkit-scrollbar-thumb,
.struggle-zone-events::-webkit-scrollbar-thumb,
.incident-events::-webkit-scrollbar-thumb,
.sync-modal-body::-webkit-scrollbar-thumb,
.sync-category-items::-webkit-scrollbar-thumb,
.sync-presets-list::-webkit-scrollbar-thumb,
.sync-results-scroll::-webkit-scrollbar-thumb,
.sync-stats-content::-webkit-scrollbar-thumb,
.sync-stats-inline::-webkit-scrollbar-thumb,
.sync-stats-table-container::-webkit-scrollbar-thumb,
.tag-suggestions::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 3px;
}

.themed-scrollbar::-webkit-scrollbar-thumb:hover,
.stats-content::-webkit-scrollbar-thumb:hover,
.notes-content::-webkit-scrollbar-thumb:hover,
.filter-content::-webkit-scrollbar-thumb:hover,
.layout-preset-list::-webkit-scrollbar-thumb:hover,
.quick-start-content::-webkit-scrollbar-thumb:hover,
.changelog-content::-webkit-scrollbar-thumb:hover,
.changelog-body::-webkit-scrollbar-thumb:hover,
.version-changelog::-webkit-scrollbar-thumb:hover,
.insurance-content::-webkit-scrollbar-thumb:hover,
.export-modal-content::-webkit-scrollbar-thumb:hover,
.clip-info-content::-webkit-scrollbar-thumb:hover,
.plate-results-thumbnails::-webkit-scrollbar-thumb:hover,
.region-list::-webkit-scrollbar-thumb:hover,
.modal-content::-webkit-scrollbar-thumb:hover,
.bottom-sheet-content::-webkit-scrollbar-thumb:hover,
.diagnostic-modal-body::-webkit-scrollbar-thumb:hover,
.layout-editor-properties::-webkit-scrollbar-thumb:hover,
.layout-editor-saved-list::-webkit-scrollbar-thumb:hover,
.session-modal-panel::-webkit-scrollbar-thumb:hover,
.stats-nav::-webkit-scrollbar-thumb:hover,
.struggle-zone-events::-webkit-scrollbar-thumb:hover,
.incident-events::-webkit-scrollbar-thumb:hover,
.sync-modal-body::-webkit-scrollbar-thumb:hover,
.sync-category-items::-webkit-scrollbar-thumb:hover,
.sync-presets-list::-webkit-scrollbar-thumb:hover,
.sync-results-scroll::-webkit-scrollbar-thumb:hover,
.sync-stats-content::-webkit-scrollbar-thumb:hover,
.sync-stats-inline::-webkit-scrollbar-thumb:hover,
.sync-stats-table-container::-webkit-scrollbar-thumb:hover,
.tag-suggestions::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
}

.settings-section,
.help-section {
    margin-bottom: 1.75rem;
}

.settings-section:last-child,
.help-section:last-child {
    margin-bottom: 0;
}

.settings-section h3,
.help-section h3 {
    font-family: var(--font-ui);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
}

.setting-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.875rem 0;
    border-bottom: 1px solid var(--border);
    flex-wrap: wrap;
    gap: 0.5rem;
}

.setting-row:last-child {
    border-bottom: none;
}

.setting-row label {
    font-size: 0.9rem;
    color: var(--text-primary);
}

.setting-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    width: 100%;
    margin-top: 0.375rem;
}

.setting-status {
    font-size: 0.75rem;
    width: 100%;
    margin-top: 0.25rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
}

.setting-status:empty {
    display: none;
}

.setting-status.loading {
    color: #ffa726;
    background: rgba(255, 167, 38, 0.1);
}

.setting-status.success {
    color: #66bb6a;
    background: rgba(102, 187, 106, 0.1);
}

.setting-status.error {
    color: #ef5350;
    background: rgba(239, 83, 80, 0.1);
}

.setting-status.info {
    color: var(--text-muted);
    background: rgba(128, 128, 128, 0.1);
}

.setting-select {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.5rem 0.875rem;
    font-family: var(--font-ui);
    font-size: 0.85rem;
    cursor: pointer;
    min-width: 120px;
    transition: all 0.2s ease;
}

.setting-select:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 10px var(--accent-glow);
}

.setting-checkbox {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: var(--accent);
}

.help-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.875rem;
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--border);
}

.help-tip {
    font-size: 0.8rem;
    color: var(--text-muted);
    font-style: italic;
}

.help-footer-actions {
    display: flex;
    gap: 8px;
}

.help-report-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.help-report-btn:hover {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
}

.settings-btn {
    padding: 0.625rem 1.5rem;
    border-radius: 8px;
    font-family: var(--font-ui);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    letter-spacing: 0.02em;
}

.settings-btn.primary {
    background: linear-gradient(135deg, var(--accent) 0%, #0099cc 100%);
    color: var(--bg-void);
    border: none;
    box-shadow: 0 0 15px var(--accent-glow);
}

.settings-btn.primary:hover {
    background: linear-gradient(135deg, var(--accent-hover) 0%, var(--accent) 100%);
    box-shadow: 0 0 25px var(--accent-glow);
}

.settings-btn.secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border);
}

.settings-btn.secondary:hover {
    background: var(--bg-elevated);
    border-color: var(--text-muted);
}

/* Keyboard Shortcuts */
.shortcut-grid {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
}

.shortcut-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.5rem 0;
}

.shortcut-row kbd {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.3rem 0.625rem;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    min-width: 55px;
    text-align: center;
    color: var(--accent);
    box-shadow: inset 0 -2px 0 var(--bg-void);
}

.shortcut-row span {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

/* ==================== RESPONSIVE ==================== */

/* Menu Toggle Button (mobile only) */
.menu-toggle-btn {
    display: none;
    background: none;
    border: none;
    color: var(--text-primary);
    padding: 0.5rem;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s ease;
}

.menu-toggle-btn:hover {
    background: var(--bg-tertiary);
    color: var(--accent);
}

/* Sidebar Overlay */
.sidebar-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 199;
    backdrop-filter: blur(2px);
}

.sidebar-overlay.visible {
    display: block;
}

/* Tablet: 768px - 1200px */
@media (max-width: 1200px) {
    .sidebar {
        width: 280px;
    }
}

/* Mobile: < 768px */
@media (max-width: 768px) {
    /* Show hamburger menu */
    .menu-toggle-btn {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Sidebar as drawer */
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        max-width: 85vw;
        height: 100vh;
        z-index: 200;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
    }

    .sidebar.open {
        transform: translateX(0);
    }

    /* Header adjustments */
    .app-header {
        padding: 0.625rem 1rem;
    }

    .header-brand {
        flex: 1;
        margin-left: 0.5rem;
    }

    .header-brand h1 {
        font-size: 1rem;
    }

    .brand-tagline {
        display: none;
    }

    .header-actions .header-btn span {
        display: none;
    }

    /* Control panel adjustments */
    .control-panel {
        flex-wrap: wrap;
        gap: 0.375rem;
        padding: 0.5rem;
    }

    .control-btn {
        min-width: 48px;
        min-height: 48px;
        padding: 0.625rem;
    }

    .event-nav-separator {
        display: none;
    }

    /* Timeline touch-friendly */
    .timeline-container {
        padding: 0.75rem;
    }

    .timeline-track {
        height: 12px;
    }

    .timeline-scrubber {
        width: 24px;
        height: 24px;
    }

    /* Video grid */
    .video-grid-container {
        padding: 0.5rem;
    }

    .camera-label,
    .video-label {
        font-size: 0.35rem;
        padding: 0.1rem 0.25rem;
    }

    /* Modals full-width on mobile */
    .settings-panel {
        width: 100%;
        max-width: 100%;
        height: 100vh;
        max-height: 100vh;
        border-radius: 0;
    }

    .help-panel,
    .changelog-content {
        width: 95%;
        max-height: 90vh;
    }

    /* Settings sidebar collapses to horizontal nav on mobile */
    .settings-layout {
        flex-direction: column;
    }

    .settings-sidebar {
        width: 100%;
        min-width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border);
    }

    .settings-sidebar-header {
        display: none;
    }

    .settings-nav {
        flex-direction: row;
        padding: 0.5rem;
        gap: 0.25rem;
        overflow-x: auto;
        scrollbar-width: none;
    }

    .settings-nav::-webkit-scrollbar {
        display: none;
    }

    .settings-nav-item {
        flex-direction: column;
        gap: 0.25rem;
        padding: 0.5rem 0.75rem;
        min-width: fit-content;
        text-align: center;
    }

    .settings-nav-item span {
        font-size: 0.7rem;
    }

    .settings-nav-item svg {
        width: 20px;
        height: 20px;
    }

    .settings-sidebar-footer {
        display: none;
    }

    .settings-main-header {
        padding: 0.75rem 1rem;
    }

    .settings-section-title {
        font-size: 0.8rem;
    }

    .settings-content {
        padding: 0.75rem 1rem 1rem;
    }

    .layout-editor-panel {
        width: 100%;
        max-width: 100%;
        height: 100vh;
        max-height: 100vh;
        border-radius: 0;
    }

    /* Filter panel in sidebar */
    .filter-panel {
        max-height: none;
        overflow: visible;
    }

    .filter-panel .filter-content.expanded {
        max-height: 350px;
        overflow-y: auto;
    }

    /* Dropdowns */
    .bookmarks-dropdown,
    .export-dropdown {
        min-width: 200px;
    }

    /* Speed/Layout controls */
    .speed-control,
    .layout-control {
        margin-left: 0;
    }

    .speed-label,
    .layout-label {
        display: none;
    }
}

/* Very small screens (phones in portrait) */
@media (max-width: 480px) {
    .header-brand h1 {
        font-size: 0.9rem;
    }

    .control-panel {
        justify-content: center;
    }

    .control-btn {
        min-width: 44px;
        min-height: 44px;
    }

    /* Stack layout/speed controls */
    .speed-control,
    .layout-control {
        width: 100%;
        justify-content: center;
    }
}

/* Narrow mobile landscape - compact header buttons */
@media (max-width: 600px) {
    .brand-icon {
        display: none;
    }

    .header-actions {
        gap: 0.25rem;
    }

    .header-actions .github-btn {
        display: none; /* GitHub link available in Settings */
    }

    .header-btn {
        padding: 0.375rem;
    }

    .header-btn svg {
        width: 18px;
        height: 18px;
    }

    /* Keep donate button but make it compact */
    .donate-btn {
        padding: 0.375rem 0.5rem !important;
    }

    .donate-btn span {
        display: none;
    }

    /* Hide overlay controls on mobile - accessible via More menu */
    .control-group-overlays {
        display: none !important;
    }

    /* Show mobile more button */
    .control-group-mobile-more {
        display: flex !important;
    }

    /* Hide notes, street view, bookmarks, zoom on mobile */
    .event-info-notes-btn,
    .street-view-btn,
    .timeline-bookmark-controls,
    .timeline-zoom-controls {
        display: none !important;
    }

    /* Fix info bar layout - single line with wrapping */
    .event-info {
        padding: 0.5rem;
    }

    .event-info-content {
        flex-direction: row;
        flex-wrap: wrap;
        gap: 0.25rem 0.75rem;
        font-size: 0.75rem;
    }

    .event-date {
        font-size: 0.7rem;
    }

    .event-location {
        font-size: 0.7rem;
    }

    /* Compact weather display */
    .weather-display {
        font-size: 0.7rem;
        gap: 0.25rem;
    }

    .weather-display .weather-temp {
        font-size: 0.8rem;
    }

    .weather-display .weather-details {
        display: none; /* Hide detailed weather on very small screens */
    }

    /* Force Bird's Eye View panel to stay hidden on mobile */
    #birdsEyePanel.sidebar-panel {
        display: none !important;
    }

    /* Show Telemetry panel above video on mobile */
    #telemetryPanel.sidebar-panel {
        display: block !important;
        position: fixed !important;
        top: 56px !important; /* Below header */
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        max-height: 240px !important;
        z-index: 100 !important;
        background: var(--bg-secondary) !important;
        border-bottom: 1px solid var(--border) !important;
        border-radius: 0 !important;
        overflow-y: auto !important;
        transform: none !important; /* Override sidebar transform */
    }

    /* Collapsed state - hide graphs on mobile */
    #telemetryPanel.sidebar-panel.collapsed .sidebar-panel-content {
        display: none !important;
        height: 0 !important;
        max-height: 0 !important;
        opacity: 0 !important;
        padding: 0 !important;
    }

    /* Expanded state - show graphs on mobile */
    #telemetryPanel.sidebar-panel:not(.collapsed) .sidebar-panel-content {
        display: flex !important;
        height: auto !important;
        max-height: 200px !important;
        opacity: 1 !important;
        padding: 0.25rem !important;
    }

    #telemetryPanel .sidebar-panel-header {
        padding: 0.25rem 0.5rem !important;
        min-height: auto !important;
    }

    #telemetryPanel .panel-title {
        font-size: 0.7rem !important;
    }

    #telemetryPanel .sidebar-panel-content {
        padding: 0.25rem !important;
        max-height: 200px !important;
        overflow-y: auto !important;
    }

    /* Compact telemetry graphs for mobile */
    #telemetryPanel .telemetry-graphs-sidebar {
        height: auto !important;
        min-height: 100px !important;
        max-height: 200px !important;
    }

    #telemetryPanel .telemetry-graphs-content {
        height: auto !important;
        min-height: 80px !important;
        flex-direction: column !important;
    }

    /* Adjust video grid to fit between telemetry panel and info bar */
    .video-grid-container {
        margin-top: 120px !important;
        margin-bottom: 90px !important;
    }

    /* Mini-map mobile fixes - ONLY vehicle marker */
    /* Smaller SVG with margin to center within 24px container, preserves rotation transform */
    .minimap-vehicle-marker svg {
        width: 14px !important;
        height: 14px !important;
        margin: 5px !important;
    }

    /* Hide close, dark mode buttons, and weather badge on mobile */
    .minimap-overlay .minimap-close-btn,
    .minimap-overlay .minimap-darkmode-btn,
    .minimap-overlay .minimap-weather-badge {
        display: none !important;
    }

    /* Smaller camera labels on mobile */
    .camera-label,
    .video-label {
        font-size: 0.35rem !important;
        padding: 0.1rem 0.25rem !important;
    }
}

/* Mobile More Menu - hidden by default on desktop */
.control-group-mobile-more {
    display: none;
}

.mobile-more-container {
    position: relative;
}

.mobile-more-menu {
    position: absolute;
    bottom: 100%;
    right: 0;
    margin-bottom: 8px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    min-width: 200px;
    max-height: 70vh;
    overflow-y: auto;
    z-index: 1000;
}

.mobile-more-menu.hidden {
    display: none;
}

.mobile-more-section {
    padding: 8px;
}

.mobile-more-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 4px 8px;
    font-weight: 600;
}

.mobile-more-option {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 10px 12px;
    background: transparent;
    border: none;
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
    transition: background 0.15s ease;
    text-align: left;
}

.mobile-more-option:hover,
.mobile-more-option:active {
    background: var(--bg-tertiary);
}

.mobile-more-option.active {
    background: var(--accent-transparent);
    color: var(--accent);
}

.mobile-more-option svg {
    flex-shrink: 0;
    color: var(--text-secondary);
}

.mobile-more-option.active svg {
    color: var(--accent);
}

.mobile-more-status {
    margin-left: auto;
    font-size: 0.7rem;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--bg-tertiary);
    color: var(--text-muted);
}

.mobile-more-option.active .mobile-more-status {
    background: var(--accent);
    color: white;
}

.mobile-more-divider {
    height: 1px;
    background: var(--border);
    margin: 4px 8px;
}

.mobile-layout-selector {
    position: relative;
}

.mobile-layout-select {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 0.75rem;
    padding: 4px 6px;
    cursor: pointer;
}

/* Bottom Sheet More Button */
.bs-more-container {
    position: relative;
}

.bs-more-container .mobile-more-menu {
    position: fixed;
    bottom: auto;
    top: auto;
    right: 10px;
    bottom: 180px;
    max-height: 60vh;
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    /* Larger touch targets */
    .control-btn {
        min-width: 48px;
        min-height: 48px;
    }

    .tab-btn {
        padding: 0.875rem 1.25rem;
    }

    .event-item {
        padding: 0.875rem;
    }

    /* Timeline touch area */
    .timeline-track {
        height: 10px;
    }

    .timeline-scrubber {
        width: 22px;
        height: 22px;
    }

    /* Disable hover effects that don't work well on touch */
    .control-btn:hover {
        background: var(--bg-tertiary);
        color: var(--text-primary);
    }

    .event-item:hover {
        background: var(--bg-tertiary);
    }
}

/* Mobile Fullscreen Video Mode */
.mobile-fullscreen-btn {
    position: absolute;
    bottom: 1rem;
    right: 1rem;
    background: rgba(0, 0, 0, 0.6);
    border: none;
    border-radius: 50%;
    padding: 0.75rem;
    color: white;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.mobile-fullscreen-btn:hover {
    background: rgba(0, 0, 0, 0.8);
    transform: scale(1.1);
}

.mobile-fullscreen-btn.hidden {
    display: none;
}

/* Show fullscreen button only on mobile */
@media (max-width: 768px) {
    .mobile-fullscreen-btn:not(.hidden) {
        display: flex;
    }
}

@media (min-width: 769px) {
    .mobile-fullscreen-btn {
        display: none !important;
    }
}

/* Fullscreen overlay controls */
.mobile-fullscreen-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: transparent;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
}

.mobile-fullscreen-overlay.hidden {
    display: none;
}

.mobile-fullscreen-overlay.active {
    pointer-events: all;
}

.fullscreen-control-btn {
    background: rgba(0, 0, 0, 0.5);
    border: none;
    border-radius: 50%;
    padding: 1.5rem;
    color: white;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mobile-fullscreen-overlay.show-controls .fullscreen-control-btn {
    opacity: 1;
}

.fullscreen-exit-btn {
    position: absolute;
    top: env(safe-area-inset-top, 1rem);
    right: env(safe-area-inset-right, 1rem);
    margin-top: 1rem;
    margin-right: 1rem;
    background: rgba(0, 0, 0, 0.5);
    border: none;
    border-radius: 50%;
    padding: 0.75rem;
    color: white;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mobile-fullscreen-overlay.show-controls .fullscreen-exit-btn {
    opacity: 1;
}

/* Body class for mobile fullscreen mode */
body.mobile-fullscreen {
    overflow: hidden;
}

body.mobile-fullscreen .app-header,
body.mobile-fullscreen .sidebar,
body.mobile-fullscreen .sidebar-overlay,
body.mobile-fullscreen .event-info,
body.mobile-fullscreen .timeline-container,
body.mobile-fullscreen .controls,
body.mobile-fullscreen .hidden-cameras-panel,
body.mobile-fullscreen .mobile-fullscreen-btn,
body.mobile-fullscreen .bottom-sheet {
    display: none !important;
}

body.mobile-fullscreen .main-content {
    padding: 0;
}

body.mobile-fullscreen .viewer-area {
    padding: 0;
}

body.mobile-fullscreen .video-grid-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    height: 100vh;
    width: 100vw;
    padding: 0;
    z-index: 9999;
    background: #000;
}

body.mobile-fullscreen .video-grid {
    height: 100%;
    width: 100%;
}

body.mobile-fullscreen .video-container {
    border: none;
    border-radius: 0;
}

body.mobile-fullscreen .video-label {
    display: none;
}

body.mobile-fullscreen .camera-hide-btn {
    display: none;
}

/* Bottom Sheet Controls for Portrait Mode */
.bottom-sheet {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border);
    border-radius: 1rem 1rem 0 0;
    z-index: 1000;
    transition: transform 0.3s ease;
    max-height: 70vh;
}

.bottom-sheet.collapsed {
    transform: translateY(calc(100% - 80px));
}

.bottom-sheet-handle {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem;
    cursor: grab;
    user-select: none;
}

.bottom-sheet-handle-bar {
    width: 40px;
    height: 4px;
    background: var(--text-muted);
    border-radius: 2px;
}

.bottom-sheet-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1rem 0.75rem;
}

.bottom-sheet-mini-controls {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.bottom-sheet-mini-timeline {
    flex: 1;
    height: 4px;
    background: var(--bg-tertiary);
    cursor: pointer;
    border-radius: 2px;
    overflow: hidden;
}

.bottom-sheet-mini-progress {
    height: 100%;
    background: var(--accent);
    width: 0%;
    transition: width 0.1s linear;
}

.bottom-sheet-content {
    padding: 0.75rem 1rem 1rem;
    overflow-y: auto;
    max-height: calc(70vh - 100px);
}

.bottom-sheet-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
}

/* Portrait mode: show bottom sheet */
@media (max-width: 768px) and (orientation: portrait) {
    body.bottom-sheet-enabled .controls {
        display: none !important;
    }

    body.bottom-sheet-enabled .bottom-sheet {
        display: block;
    }

    body.bottom-sheet-enabled .timeline-container {
        display: none;
    }

    body.bottom-sheet-enabled .viewer-area {
        padding-bottom: 120px;
    }

    /* Position event info bar above bottom sheet */
    body.bottom-sheet-enabled .event-info {
        position: fixed;
        bottom: 80px;
        left: 0;
        right: 0;
        z-index: 999;
        background: var(--bg-secondary);
        border-top: 1px solid var(--border);
        padding: 0.35rem 0.5rem;
        font-size: 0.7rem;
    }

    body.bottom-sheet-enabled .event-info-content {
        flex-direction: row;
        flex-wrap: wrap;
        gap: 0.15rem 0.5rem;
        justify-content: center;
    }
}

/* Safe area insets for notched phones (iPhone X+, etc.) */
@supports (padding: env(safe-area-inset-bottom)) {
    /* Header - account for notch */
    .app-header {
        padding-top: max(0.625rem, env(safe-area-inset-top));
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
    }

    /* Controls panel at bottom */
    .controls {
        padding-bottom: calc(0.875rem + env(safe-area-inset-bottom));
    }

    /* Sidebar drawer */
    .sidebar {
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
    }

    /* Timeline */
    .timeline-container {
        padding-left: max(0.75rem, env(safe-area-inset-left));
        padding-right: max(0.75rem, env(safe-area-inset-right));
    }

    /* Video grid - landscape mode safe areas */
    .video-grid-container {
        padding-left: max(0.5rem, env(safe-area-inset-left));
        padding-right: max(0.5rem, env(safe-area-inset-right));
    }

    /* Modals - ensure content visible */
    .settings-panel,
    .help-panel,
    .notes-panel,
    .stats-modal-content,
    .changelog-content {
        padding-bottom: calc(1rem + env(safe-area-inset-bottom));
    }

    /* Fixed bottom elements */
    .export-dropdown,
    .bookmarks-dropdown {
        bottom: calc(100% + env(safe-area-inset-bottom));
    }
}

/* ==================== SWIPE INDICATORS ==================== */
.swipe-indicator {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    width: 60px;
    height: 60px;
    background: rgba(var(--accent-rgb, 74, 158, 255), 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    z-index: 1000;
    animation: swipeIndicatorPop 0.4s ease-out forwards;
    pointer-events: none;
}

.swipe-prev {
    left: 20px;
}

.swipe-next {
    right: 20px;
}

@keyframes swipeIndicatorPop {
    0% {
        opacity: 0;
        transform: translateY(-50%) scale(0.5);
    }
    50% {
        opacity: 1;
        transform: translateY(-50%) scale(1.1);
    }
    100% {
        opacity: 0;
        transform: translateY(-50%) scale(1);
    }
}

/* ==================== ANIMATIONS ==================== */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.event-item {
    animation: fadeIn 0.3s ease forwards;
}

.event-item:nth-child(1) { animation-delay: 0.02s; }
.event-item:nth-child(2) { animation-delay: 0.04s; }
.event-item:nth-child(3) { animation-delay: 0.06s; }
.event-item:nth-child(4) { animation-delay: 0.08s; }
.event-item:nth-child(5) { animation-delay: 0.10s; }
.event-item:nth-child(n+6) { animation-delay: 0.12s; }

/* ==================== ACCESSIBILITY ==================== */

/* Text Size - Small */
body.text-small {
    font-size: 14px;
}

body.text-small .event-title {
    font-size: 0.85rem;
}

body.text-small .event-date,
body.text-small .event-location,
body.text-small .event-time {
    font-size: 0.7rem;
}

body.text-small .control-btn {
    width: 36px;
    height: 36px;
}

body.text-small .control-btn svg {
    width: 16px;
    height: 16px;
}

body.text-small .settings-section h3,
body.text-small .help-section h3 {
    font-size: 0.85rem;
}

/* Text Size - Medium (Default) */
body.text-medium {
    font-size: 15px;
}

body.text-medium .event-title {
    font-size: 0.95rem;
}

body.text-medium .event-date,
body.text-medium .event-location,
body.text-medium .event-time {
    font-size: 0.8rem;
}

body.text-medium .control-btn {
    width: 42px;
    height: 42px;
}

body.text-medium .control-btn svg {
    width: 20px;
    height: 20px;
}

body.text-medium .settings-section h3,
body.text-medium .help-section h3 {
    font-size: 0.95rem;
}

/* Text Size - Large */
body.text-large {
    font-size: 17px;
}

body.text-large .event-title {
    font-size: 1.1rem;
}

body.text-large .event-date,
body.text-large .event-location,
body.text-large .event-time {
    font-size: 0.9rem;
}

body.text-large .control-btn {
    width: 48px;
    height: 48px;
}

body.text-large .control-btn svg {
    width: 24px;
    height: 24px;
}

body.text-large .settings-section h3,
body.text-large .help-section h3 {
    font-size: 1.1rem;
}

body.text-large kbd {
    font-size: 0.85rem;
    padding: 0.35rem 0.6rem;
}

body.text-large .setting-row label {
    font-size: 0.95rem;
}

/* High Contrast Mode */
body.high-contrast {
    --text-primary: #ffffff;
    --text-secondary: #c0c0c0;
    --text-muted: #909090;
    --bg-void: #000000;
    --bg-primary: #0a0a0a;
    --bg-secondary: #141414;
    --bg-tertiary: #1e1e1e;
    --bg-elevated: #282828;
    --border: rgba(255, 255, 255, 0.2);
    --border-accent: rgba(0, 212, 255, 0.5);
    --accent: #00e5ff;
    --accent-hover: #66f0ff;
}

body.high-contrast .event-item {
    border: 1px solid rgba(255, 255, 255, 0.15);
}

body.high-contrast .event-item:hover,
body.high-contrast .event-item.active {
    border-color: var(--accent);
}

body.high-contrast .control-btn {
    border: 1px solid rgba(255, 255, 255, 0.2);
}

body.high-contrast .control-btn:hover {
    border-color: var(--accent);
}

body.high-contrast .video-container {
    border: 2px solid rgba(255, 255, 255, 0.2);
}

body.high-contrast .video-container.active {
    border-color: var(--accent);
}

body.high-contrast .timeline-container {
    border: 1px solid rgba(255, 255, 255, 0.2);
}

body.high-contrast .camera-label {
    background: rgba(0, 0, 0, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

body.high-contrast .sidebar {
    border-right: 2px solid rgba(255, 255, 255, 0.15);
}

body.high-contrast .app-header {
    border-bottom: 2px solid rgba(255, 255, 255, 0.15);
}

body.high-contrast .tab-btn {
    border: 1px solid transparent;
}

body.high-contrast .tab-btn.active {
    border-color: var(--accent);
}

body.high-contrast input[type="text"],
body.high-contrast input[type="search"],
body.high-contrast select {
    border: 1px solid rgba(255, 255, 255, 0.3);
}

body.high-contrast input[type="text"]:focus,
body.high-contrast input[type="search"]:focus,
body.high-contrast select:focus {
    border-color: var(--accent);
    outline: 2px solid var(--accent);
    outline-offset: 1px;
}

/* Focus indicators for keyboard navigation */
body.high-contrast *:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

body.high-contrast .settings-btn,
body.high-contrast .help-btn,
body.high-contrast .quickstart-btn {
    border: 1px solid rgba(255, 255, 255, 0.2);
}

body.high-contrast .settings-btn.primary,
body.high-contrast .quickstart-btn.primary {
    border-color: var(--accent);
}

/* ==================== THEMES ==================== */

/* Light Theme */
body.theme-light {
    --bg-void: #f0f2f5;
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --bg-elevated: #ffffff;

    --text-primary: #1a1a2e;
    --text-secondary: #495057;
    --text-muted: #868e96;

    --accent: #0066cc;
    --accent-glow: rgba(0, 102, 204, 0.25);
    --accent-subtle: rgba(0, 102, 204, 0.1);
    --accent-hover: #0077ee;

    --border: rgba(0, 0, 0, 0.08);
    --border-accent: rgba(0, 102, 204, 0.3);
    --glass: rgba(255, 255, 255, 0.9);
    --glass-border: rgba(0, 0, 0, 0.1);

    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.12);
    --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.16);
}

/* Light theme - remove grid background */
body.theme-light::before {
    background-image:
        linear-gradient(rgba(0, 102, 204, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 102, 204, 0.03) 1px, transparent 1px);
}

/* Light theme - specific overrides */
body.theme-light .app-header {
    background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    border-bottom: 1px solid var(--border);
}

body.theme-light .sidebar {
    background: var(--bg-primary);
    border-right-color: var(--border);
}

body.theme-light .event-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
}

body.theme-light .event-item:hover {
    background: var(--bg-tertiary);
    border-color: var(--accent);
}

body.theme-light .event-item.active {
    background: var(--accent-subtle);
    border-color: var(--accent);
}

body.theme-light .control-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-primary);
}

body.theme-light .control-btn:hover {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
}

body.theme-light .timeline-container {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
}

body.theme-light .timeline-progress {
    background: linear-gradient(90deg, var(--accent), var(--accent-hover));
}

body.theme-light .video-container {
    background: #1a1a1a;
}

body.theme-light .camera-label {
    background: rgba(0, 0, 0, 0.75);
    color: #ffffff;
}

body.theme-light select,
body.theme-light input[type="text"],
body.theme-light input[type="search"],
body.theme-light input[type="date"] {
    background: var(--bg-primary);
    border: 1px solid var(--border);
    color: var(--text-primary);
}

body.theme-light .tab-btn {
    color: var(--text-secondary);
}

body.theme-light .tab-btn.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
}

body.theme-light .settings-panel,
body.theme-light .help-panel,
body.theme-light .changelog-content {
    background: var(--bg-primary);
    border: 1px solid var(--border);
}

body.theme-light .settings-sidebar {
    background: var(--bg-secondary);
}

body.theme-light .settings-nav-item:hover {
    background: var(--bg-tertiary);
}

body.theme-light .settings-main-header {
    background: var(--bg-primary);
}

body.theme-light .settings-overlay,
body.theme-light .help-overlay,
body.theme-light .changelog-modal::before {
    background: rgba(0, 0, 0, 0.4);
}

/* Light theme - loading overlay */
body.theme-light .loading-overlay {
    background: rgba(255, 255, 255, 0.95);
}

body.theme-light .loading-spinner {
    border-color: var(--bg-tertiary);
    border-top-color: var(--accent);
    box-shadow: 0 0 30px var(--accent-glow);
}

body.theme-light .loading-text {
    color: var(--text-secondary);
}

/* Light theme - stats modal */
body.theme-light .stats-overlay {
    background: rgba(0, 0, 0, 0.4);
}

body.theme-light .stats-panel {
    background: var(--bg-primary);
    border-color: var(--border);
}

body.theme-light .stats-header {
    background: var(--bg-secondary);
}

body.theme-light .stats-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

/* Light theme - export and bookmarks dropdowns */
body.theme-light .export-dropdown,
body.theme-light .bookmarks-dropdown {
    background: var(--bg-primary);
    border-color: var(--border);
    box-shadow: var(--shadow-md);
}

body.theme-light .export-dropdown-header,
body.theme-light .bookmarks-dropdown-header {
    background: var(--bg-secondary);
    border-color: var(--border);
}

body.theme-light .export-option:hover,
body.theme-light .bookmark-item:hover {
    background: var(--bg-tertiary);
}

/* Light theme - quickstart guide */
body.theme-light .quickstart-panel {
    background: var(--bg-primary);
    border-color: var(--border);
}

body.theme-light .quickstart-step {
    background: var(--bg-secondary);
    border-color: var(--border);
}

/* Midnight Theme - Deep blue with purple accent */
body.theme-midnight {
    --bg-void: #0a0a1a;
    --bg-primary: #0f0f24;
    --bg-secondary: #14142e;
    --bg-tertiary: #1a1a3a;
    --bg-elevated: #202048;

    --text-primary: #e8e8f0;
    --text-secondary: #9898b8;
    --text-muted: #6868a0;

    --accent: #6366f1;
    --accent-glow: rgba(99, 102, 241, 0.4);
    --accent-subtle: rgba(99, 102, 241, 0.15);
    --accent-hover: #818cf8;

    --border: rgba(255, 255, 255, 0.06);
    --border-accent: rgba(99, 102, 241, 0.4);
    --glass: rgba(15, 15, 36, 0.9);
    --glass-border: rgba(255, 255, 255, 0.08);

    --success: #34d399;
    --warning: #fbbf24;
    --danger: #f87171;
}

body.theme-midnight::before {
    background-image:
        linear-gradient(rgba(99, 102, 241, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(99, 102, 241, 0.03) 1px, transparent 1px);
}

body.theme-midnight .app-header {
    background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
}

body.theme-midnight .event-item.active {
    background: linear-gradient(135deg, var(--accent-subtle) 0%, transparent 100%);
    border-color: var(--accent);
}

body.theme-midnight .timeline-progress {
    background: linear-gradient(90deg, #6366f1, #a78bfa);
}

body.theme-midnight .control-btn:hover {
    background: var(--accent-subtle);
    color: var(--accent);
}

/* Tesla Red Theme - Red accent variant */
body.theme-tesla-red {
    --bg-void: #06080c;
    --bg-primary: #0a0c12;
    --bg-secondary: #0f1218;
    --bg-tertiary: #161a24;
    --bg-elevated: #1c2230;

    --text-primary: #e8eaed;
    --text-secondary: #8b919e;
    --text-muted: #5c6370;

    --accent: #e31937;
    --accent-glow: rgba(227, 25, 55, 0.4);
    --accent-subtle: rgba(227, 25, 55, 0.15);
    --accent-hover: #ff2d4a;

    --border: rgba(255, 255, 255, 0.06);
    --border-accent: rgba(227, 25, 55, 0.4);

    --success: #00ff88;
    --warning: #ffb800;
    --danger: #ff3b3b;
}

body.theme-tesla-red::before {
    background-image:
        linear-gradient(rgba(227, 25, 55, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(227, 25, 55, 0.02) 1px, transparent 1px);
}

body.theme-tesla-red .event-item.active {
    background: linear-gradient(135deg, var(--accent-subtle) 0%, transparent 100%);
    border-color: var(--accent);
}

body.theme-tesla-red .timeline-progress {
    background: linear-gradient(90deg, #e31937, #ff4d6a);
}

body.theme-tesla-red .control-btn:hover {
    background: var(--accent-subtle);
    color: var(--accent);
}

body.theme-tesla-red .brand-icon {
    background: linear-gradient(135deg, var(--accent) 0%, #ff4d6a 100%);
    border-radius: 50%;
}

/* ==================== VIDEO ENHANCEMENT CONTROLS ==================== */

.video-enhancement-controls {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--glass);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 1rem;
    z-index: 100;
    min-width: 280px;
    box-shadow: var(--shadow-lg);
}

.video-enhancement-controls.hidden {
    display: none;
}

.enhancement-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border);
}

.enhancement-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--text-primary);
}

.enhancement-title svg {
    color: var(--accent);
}

.enhancement-close-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0;
    line-height: 1;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.2s ease;
}

.enhancement-close-btn:hover {
    color: var(--accent);
    background: var(--accent-subtle);
}

.enhancement-sliders {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.enhancement-slider-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.enhancement-slider-row label {
    flex: 0 0 75px;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.enhancement-slider-row input[type="range"] {
    flex: 1;
    height: 6px;
    background: var(--bg-tertiary);
    border-radius: 3px;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
}

.enhancement-slider-row input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 8px var(--accent-glow);
    transition: transform 0.15s ease;
}

.enhancement-slider-row input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.15);
}

.enhancement-slider-row input[type="range"]::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 8px var(--accent-glow);
}

.enhancement-slider-row span {
    flex: 0 0 45px;
    text-align: right;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--text-muted);
}

.enhancement-actions {
    margin-top: 1rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--border);
}

.enhancement-reset-btn {
    width: 100%;
    padding: 0.5rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.enhancement-reset-btn:hover {
    background: var(--bg-elevated);
    color: var(--accent);
    border-color: var(--accent);
}

.enhancement-note {
    margin-top: 0.75rem;
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
}

/* Light theme overrides for enhancement controls */
body.theme-light .video-enhancement-controls {
    background: rgba(255, 255, 255, 0.95);
    border-color: var(--border);
}

body.theme-light .enhancement-slider-row input[type="range"] {
    background: var(--bg-tertiary);
}

/* ==================== STATISTICS MODAL ==================== */

.stats-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stats-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(4px);
}

.stats-panel {
    position: relative;
    width: 90%;
    max-width: 800px;
    max-height: 85vh;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}

/* Stats sidebar layout */
.stats-layout {
    display: flex;
    flex: 1;
    overflow: hidden;
    min-height: 0;
}

.stats-sidebar {
    width: 180px;
    background: var(--bg-tertiary);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
}

.stats-sidebar-header {
    padding: 1rem;
    border-bottom: 1px solid var(--border);
}

.stats-sidebar-header h2 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.stats-sidebar-header h2 svg {
    width: 18px;
    height: 18px;
    color: var(--accent);
}

.stats-nav {
    flex: 1;
    overflow-y: auto;
    padding: 0.5rem;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) transparent;
}

.stats-nav-item {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 0.75rem;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 6px;
    font-size: 0.8rem;
    text-align: left;
    transition: all 0.15s ease;
    margin-bottom: 2px;
}

.stats-nav-item:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

.stats-nav-item.active {
    background: var(--accent-subtle, rgba(74, 158, 255, 0.15));
    color: var(--accent);
}

.stats-nav-item svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    opacity: 0.7;
}

.stats-nav-item.active svg {
    opacity: 1;
}

.stats-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
    overflow: hidden;
}

.stats-main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.875rem 1.25rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
}

.stats-section-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

.stats-tab-content {
    display: none;
}

.stats-tab-content.active {
    display: block;
}

/* Mobile responsive - stack sidebar on top */
@media (max-width: 600px) {
    .stats-panel {
        max-width: 95%;
    }

    .stats-layout {
        flex-direction: column;
    }

    .stats-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border);
        max-height: none;
    }

    .stats-sidebar-header {
        display: none;
    }

    .stats-nav {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: auto;
        padding: 0.5rem;
        gap: 0.25rem;
    }

    .stats-nav-item {
        flex-shrink: 0;
        padding: 0.5rem 0.75rem;
        white-space: nowrap;
        font-size: 0.75rem;
    }

    .stats-nav-item svg {
        width: 14px;
        height: 14px;
    }
}

.stats-header {
    display: none; /* Hidden - using sidebar header instead */
}

.stats-close-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: all 0.2s;
}

.stats-close-btn:hover {
    color: var(--text-primary);
    background: var(--bg-elevated);
}

.stats-content {
    flex: 1;
    overflow-y: auto;
    padding: 1.25rem 1.5rem;
}

.stats-section {
    margin-bottom: 1.5rem;
}

.stats-section:last-child {
    margin-bottom: 0;
}

.stats-section h3 {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
}

/* Stats Cards Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
}

.stats-card {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.875rem;
    text-align: center;
}

.stats-card-value {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--accent);
    font-family: var(--font-mono);
}

.stats-card-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-top: 0.25rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Event Types Bars */
.stats-types {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.stats-type-item {
    position: relative;
    height: 28px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
}

.stats-type-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    opacity: 0.6;
    transition: width 0.3s ease;
}

.stats-type-label {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    height: 100%;
    padding: 0 0.75rem;
    font-size: 0.85rem;
    color: var(--text-primary);
}

/* Trigger Bars */
.stats-bars {
    display: flex;
    flex-direction: column;
    gap: 0.625rem;
}

.stats-bar-row {
    display: grid;
    grid-template-columns: 100px 1fr 80px;
    gap: 0.75rem;
    align-items: center;
}

.stats-bar-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.stats-bar-track {
    height: 8px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
}

.stats-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent-hover));
    border-radius: 4px;
    transition: width 0.3s ease;
}

.stats-bar-value {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: right;
    font-family: var(--font-mono);
}

/* Locations */
.stats-locations {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.stats-location-row {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border);
}

.stats-location-row:last-child {
    border-bottom: none;
}

.stats-location-rank {
    font-size: 0.8rem;
    color: var(--text-muted);
    width: 1.5rem;
}

.stats-location-name {
    flex: 1;
    font-size: 0.85rem;
    color: var(--text-primary);
}

.stats-location-count {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
}

.stats-empty {
    color: var(--text-muted);
    font-size: 0.85rem;
    text-align: center;
    padding: 1rem;
}

.stats-date-range {
    font-size: 0.9rem;
    color: var(--text-secondary);
    font-family: var(--font-mono);
}

/* Stats Grid - 4 columns */
.stats-grid-4 {
    grid-template-columns: repeat(4, 1fr);
}

@media (max-width: 500px) {
    .stats-grid-4 {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Timeline Chart */
.stats-timeline-chart {
    display: flex;
    align-items: flex-end;
    gap: 4px;
    height: 80px;
    padding: 0.5rem 0;
}

.stats-timeline-bar {
    flex: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
}

.stats-timeline-fill {
    width: 100%;
    background: linear-gradient(180deg, var(--accent), var(--accent-hover));
    border-radius: 2px 2px 0 0;
    min-height: 0;
    transition: height 0.3s ease;
}

.stats-timeline-count {
    font-size: 0.65rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
    margin-top: 4px;
    height: 14px;
}

.stats-timeline-labels {
    display: flex;
    justify-content: space-between;
    padding-top: 0.25rem;
    border-top: 1px solid var(--border);
}

.stats-timeline-labels span {
    font-size: 0.7rem;
    color: var(--text-muted);
}

/* Stats type label with icon */
.stats-type-label svg {
    margin-right: 6px;
    vertical-align: middle;
}

/* Hour of Day Chart (24-hour) */
.stats-hour-chart {
    display: flex;
    align-items: flex-end;
    gap: 2px;
    height: 80px;
    padding: 0.5rem 0;
}

.stats-hour-bar {
    flex: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
}

.stats-hour-fill {
    width: 100%;
    border-radius: 2px 2px 0 0;
    min-height: 0;
    transition: height 0.3s ease;
}

.stats-hour-labels {
    display: flex;
    justify-content: space-between;
    padding-top: 0.25rem;
    border-top: 1px solid var(--border);
}

.stats-hour-labels span {
    font-size: 0.65rem;
    color: var(--text-muted);
}

/* Camera Distribution Chart */
.stats-camera-distribution {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.stats-camera-row {
    display: grid;
    grid-template-columns: 100px 1fr 80px;
    gap: 0.75rem;
    align-items: center;
}

.stats-camera-label {
    font-size: 0.8rem;
    font-weight: 500;
}

.stats-camera-bar-track {
    height: 12px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    overflow: hidden;
}

.stats-camera-bar-fill {
    height: 100%;
    border-radius: 6px;
    transition: width 0.5s ease;
}

.stats-camera-value {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: right;
}

/* Day of Week Chart */
.stats-dow-chart {
    display: flex;
    align-items: flex-end;
    gap: 8px;
    height: 100px;
    padding: 0.5rem 0;
}

.stats-dow-bar {
    flex: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    gap: 4px;
}

.stats-dow-fill {
    width: 100%;
    border-radius: 4px 4px 0 0;
    min-height: 0;
    transition: height 0.3s ease;
}

.stats-dow-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-top: 4px;
}

.stats-dow-legend {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-top: 0.75rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--border);
}

.stats-legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.75rem;
    color: var(--text-muted);
}

.stats-legend-color {
    width: 12px;
    height: 12px;
    border-radius: 2px;
}

/* Day vs Night Chart */
.stats-day-night {
    display: flex;
    align-items: center;
    gap: 2rem;
    padding: 1rem 0;
}

.stats-day-night-visual {
    flex-shrink: 0;
}

.stats-dn-donut {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: conic-gradient(
        #ffc107 0deg,
        #ffc107 calc(var(--day-percent) * 3.6deg),
        #1a237e calc(var(--day-percent) * 3.6deg),
        #1a237e 360deg
    );
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.stats-dn-center {
    width: 50px;
    height: 50px;
    background: var(--panel-bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stats-day-night-legend {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    flex: 1;
}

.stats-dn-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.stats-dn-color {
    width: 16px;
    height: 16px;
    border-radius: 3px;
    flex-shrink: 0;
}

.stats-dn-label {
    font-size: 0.85rem;
    flex: 1;
}

.stats-dn-value {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text);
}

/* Stats Grid 2-column */
.stats-grid-2 {
    grid-template-columns: repeat(2, 1fr);
}

/* Small stats card */
.stats-card-small {
    padding: 0.75rem !important;
}

.stats-card-small .stats-card-value {
    font-size: 1.5rem;
}

.stats-card-small .stats-card-label {
    font-size: 0.7rem;
}

.stats-card-percent {
    font-size: 0.7rem;
    color: var(--accent);
    margin-top: 0.25rem;
    display: block;
}

/* Weekly/Monthly Trends Chart */
.stats-trends-toggle {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.stats-trend-btn {
    padding: 0.4rem 0.8rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-secondary);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.stats-trend-btn:hover {
    border-color: var(--accent);
    color: var(--text-primary);
}

.stats-trend-btn.active {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
}

.stats-trends-container {
    min-height: 120px;
}

.stats-trends-chart {
    display: flex;
    align-items: flex-end;
    gap: 4px;
    height: 100px;
    padding: 0.5rem 0;
}

.stats-trend-bar {
    flex: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    min-width: 0;
}

.stats-trend-fill {
    width: 100%;
    max-width: 40px;
    border-radius: 3px 3px 0 0;
    min-height: 0;
    transition: height 0.3s ease;
    background: linear-gradient(180deg, var(--accent) 0%, rgba(74, 158, 255, 0.7) 100%);
}

.stats-trend-count {
    font-size: 0.65rem;
    color: var(--text-muted);
    margin-bottom: 2px;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.stats-trend-bar:hover .stats-trend-count {
    opacity: 1;
}

.stats-trends-labels {
    display: flex;
    justify-content: space-between;
    padding-top: 0.25rem;
    border-top: 1px solid var(--border);
}

.stats-trends-labels span {
    flex: 1;
    text-align: center;
    font-size: 0.6rem;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Show only every other label on narrow screens */
@media (max-width: 768px) {
    .stats-trends-labels span:nth-child(even) {
        display: none;
    }
}

/* Export Buttons */
.stats-export-section {
    border-top: 1px solid var(--border);
    padding-top: 1rem;
    margin-top: 0.5rem;
}

.stats-export-buttons {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.stats-export-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.stats-export-btn:hover {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
}

.stats-export-btn svg {
    width: 16px;
    height: 16px;
}

/* Telemetry Verification UI */
.stats-telemetry-check {
    text-align: center;
    padding: 1rem 0;
}

.stats-verify-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: var(--accent);
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.stats-verify-btn:hover {
    background: var(--accent-hover);
    transform: translateY(-1px);
}

.stats-verify-btn svg {
    width: 16px;
    height: 16px;
}

.stats-telemetry-progress {
    padding: 1rem 0;
}

.stats-progress-bar {
    height: 8px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 0.75rem;
}

.stats-progress-fill {
    height: 100%;
    background: var(--accent);
    border-radius: 4px;
    width: 0;
    transition: width 0.3s ease;
}

.stats-progress-text {
    color: var(--text-secondary);
    font-size: 0.85rem;
    text-align: center;
    margin: 0;
}

/* ==================== NOTES MODAL ==================== */

.notes-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.notes-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(4px);
}

.notes-panel {
    position: relative;
    width: 90%;
    max-width: 500px;
    max-height: 85vh;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}

.notes-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
}

.notes-header h2 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
}

.notes-close-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: all 0.2s;
}

.notes-close-btn:hover {
    color: var(--text-primary);
    background: var(--bg-elevated);
}

.notes-content {
    flex: 1;
    overflow-y: auto;
    padding: 1.25rem;
}

.notes-event-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem;
    background: var(--bg-tertiary);
    border-radius: 8px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 1.25rem;
    word-break: break-all;
}

.notes-event-info svg {
    flex-shrink: 0;
    color: var(--accent);
}

.notes-section {
    margin-bottom: 1.25rem;
}

.notes-section:last-child {
    margin-bottom: 0;
}

.notes-label {
    display: block;
    margin-bottom: 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

.notes-textarea {
    width: 100%;
    min-height: 120px;
    padding: 0.75rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-primary);
    font-family: var(--font-ui);
    font-size: 0.9rem;
    resize: vertical;
    transition: border-color 0.2s;
}

.notes-textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent-subtle);
}

.notes-char-count {
    text-align: right;
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 0.25rem;
    font-family: var(--font-mono);
}

/* Tags Container */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: flex-start;
    margin-bottom: 0.75rem;
}

.current-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.tag-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.3rem 0.6rem;
    background: var(--accent-subtle);
    border: 1px solid var(--accent);
    border-radius: 20px;
    font-size: 0.8rem;
    color: var(--accent);
}

.tag-remove {
    background: none;
    border: none;
    color: var(--accent);
    cursor: pointer;
    padding: 0 0.15rem;
    font-size: 1.1rem;
    line-height: 1;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.tag-remove:hover {
    opacity: 1;
    color: var(--danger);
}

.tag-input-container {
    position: relative;
    flex: 1;
    min-width: 120px;
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.tag-input {
    flex: 1;
    padding: 0.5rem 0.75rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 20px;
    color: var(--text-primary);
    font-size: 0.85rem;
    transition: border-color 0.2s;
}

.tag-input:focus {
    outline: none;
    border-color: var(--accent);
}

.add-tag-btn {
    width: 28px;
    height: 28px;
    padding: 0;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: background 0.2s, transform 0.1s;
}

.add-tag-btn:hover {
    background: var(--accent-hover);
    transform: scale(1.05);
}

.add-tag-btn:active {
    transform: scale(0.95);
}

.tag-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-top: 4px;
    max-height: 150px;
    overflow-y: auto;
    z-index: 10;
    box-shadow: var(--shadow-md);
}

.tag-suggestions.hidden {
    display: none;
}

.tag-suggestion {
    padding: 0.6rem 0.75rem;
    cursor: pointer;
    font-size: 0.85rem;
    color: var(--text-secondary);
    transition: all 0.15s;
}

.tag-suggestion:hover {
    background: var(--accent-subtle);
    color: var(--accent);
}

.existing-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
    align-items: center;
}

.existing-tags-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-right: 0.25rem;
}

.existing-tag-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 0.2rem 0.5rem;
    font-size: 0.7rem;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
}

.existing-tag-btn:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: var(--accent-subtle);
}

.notes-footer {
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    background: var(--bg-tertiary);
}

.notes-btn {
    padding: 0.5rem 1.25rem;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.notes-btn.secondary {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
}

.notes-btn.secondary:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

.notes-btn.primary {
    background: var(--accent);
    border: 1px solid var(--accent);
    color: var(--bg-void);
}

.notes-btn.primary:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
}

/* Notes indicator on event cards */
.notes-indicator {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    font-size: 0.7rem;
    color: var(--accent);
    margin-left: 0.25rem;
}

/* Light theme overrides */
body.theme-light .notes-overlay {
    background: rgba(0, 0, 0, 0.4);
}

body.theme-light .notes-panel {
    background: var(--bg-primary);
}

body.theme-light .notes-header,
body.theme-light .notes-footer {
    background: var(--bg-secondary);
}

body.theme-light .tag-chip {
    background: var(--accent-subtle);
}

/* ==================== LAYOUT EDITOR ==================== */

.layout-editor-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.layout-editor-modal.visible {
    opacity: 1;
}

.layout-editor-modal.hidden {
    opacity: 0;
    pointer-events: none;
}

.layout-editor-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(4px);
}

.layout-editor-panel {
    position: relative;
    width: 95%;
    max-width: 1400px;
    max-height: 92vh;
    min-height: 600px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}

.layout-editor-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
}

.layout-editor-header h2 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.layout-editor-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: all 0.2s;
}

.layout-editor-close:hover {
    color: var(--text-primary);
    background: var(--bg-elevated);
}

.layout-editor-toolbar {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1.25rem;
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border);
}

.layout-editor-toolbar-spacer {
    flex: 1;
}

.layout-editor-toolbar label {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.layout-editor-snap-toggle {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    cursor: pointer;
    padding: 0.4rem 0.6rem;
    border-radius: 4px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    transition: border-color 0.2s;
}

.layout-editor-snap-toggle:hover {
    border-color: var(--accent);
}

.layout-editor-snap-toggle input[type="checkbox"] {
    accent-color: var(--accent);
    cursor: pointer;
}

.layout-editor-snap-toggle span {
    font-size: 0.8rem;
    color: var(--text-primary);
}

.layout-editor-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 0.75rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
}

.layout-editor-btn:hover {
    background: var(--bg-elevated);
    border-color: var(--accent);
}

.layout-editor-btn.primary {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--bg-void);
    font-weight: 500;
}

.layout-editor-btn.primary:hover {
    background: var(--accent-hover);
}

.layout-editor-btn.secondary {
    background: transparent;
}

.layout-editor-btn.small {
    padding: 0.3rem 0.5rem;
}

.layout-editor-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.layout-editor-select {
    padding: 0.4rem 0.6rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 0.85rem;
}

.layout-editor-select.small {
    padding: 0.25rem 0.4rem;
    font-size: 0.8rem;
}

.layout-editor-content {
    display: flex;
    flex: 1;
    overflow: hidden;
}

.layout-editor-preview-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    background: var(--bg-void);
    min-width: 0;
}

.layout-editor-preview {
    width: 100%;
    max-width: 700px;
    background: #1a1a1a;
    border: 2px solid var(--border);
    border-radius: 8px;
    position: relative;
    overflow: visible; /* Allow resize handles to show outside */
}

.layout-editor-hint {
    margin-top: 1rem;
    color: var(--text-muted);
    font-size: 0.8rem;
}

.layout-editor-cam-placeholder {
    position: absolute;
    background: var(--bg-tertiary);
    border: 2px solid var(--border);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: move;
    user-select: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    box-sizing: border-box;
}

.layout-editor-cam-placeholder:hover {
    border-color: var(--accent);
}

.layout-editor-cam-placeholder.selected {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent-subtle);
}

.layout-editor-cam-placeholder .cam-content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--bg-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 2px;
}

.layout-editor-cam-placeholder .cam-label {
    font-size: 11px;
    color: #fff;
    font-weight: 600;
    pointer-events: none;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8), 0 0 6px rgba(0, 0, 0, 0.5);
    padding: 0.25rem 0.5rem;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 3px;
}

.resize-handle {
    position: absolute;
    width: 12px;
    height: 12px;
    background: var(--accent);
    border: 2px solid var(--bg-void);
    border-radius: 2px;
}

.resize-handle.nw { top: -6px; left: -6px; cursor: nw-resize; }
.resize-handle.ne { top: -6px; right: -6px; cursor: ne-resize; }
.resize-handle.sw { bottom: -6px; left: -6px; cursor: sw-resize; }
.resize-handle.se { bottom: -6px; right: -6px; cursor: se-resize; }

/* Snap guide lines */
.snap-guide {
    position: absolute;
    background: var(--accent);
    pointer-events: none;
    z-index: 1000;
    opacity: 0.7;
}

.snap-guide-v {
    width: 1px;
    top: 0;
    bottom: 0;
    box-shadow: 0 0 4px var(--accent);
}

.snap-guide-h {
    height: 1px;
    left: 0;
    right: 0;
    box-shadow: 0 0 4px var(--accent);
}

/* Center alignment guides - more prominent */
.snap-guide-center {
    background: #ffa500;
    box-shadow: 0 0 8px #ffa500, 0 0 16px rgba(255, 165, 0, 0.5);
}

.snap-guide-center.snap-guide-v {
    width: 2px;
}

.snap-guide-center.snap-guide-h {
    height: 2px;
}

.layout-editor-properties {
    width: 320px;
    background: var(--bg-secondary);
    border-left: 1px solid var(--border);
    overflow-y: auto;
    padding: 1rem;
}

.layout-editor-prop-section {
    margin-bottom: 1.25rem;
}

.layout-editor-prop-section h3 {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
}

.layout-editor-camera-select {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
}

.layout-editor-cam-btn {
    padding: 0.35rem 0.6rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-secondary);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.layout-editor-cam-btn:hover:not(:disabled) {
    border-color: var(--accent);
    color: var(--text-primary);
}

.layout-editor-cam-btn.active {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--bg-void);
}

.layout-editor-cam-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.layout-editor-prop-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.layout-editor-prop-row label {
    color: var(--text-secondary);
    font-size: 0.8rem;
    min-width: 20px;
}

.layout-editor-prop-row input[type="number"] {
    width: 55px;
    padding: 0.35rem 0.5rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 0.85rem;
    font-family: var(--font-mono);
}

.layout-editor-prop-row input[type="number"]:focus {
    border-color: var(--accent);
    outline: none;
}

.layout-editor-prop-row span {
    color: var(--text-primary);
    font-size: 0.85rem;
    font-family: var(--font-mono);
    min-width: 20px;
    text-align: center;
}

.layout-editor-crop-grid {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.crop-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.crop-row label {
    width: 50px;
    color: var(--text-secondary);
    font-size: 0.8rem;
}

.crop-row input[type="range"] {
    flex: 1;
    height: 4px;
    background: var(--bg-tertiary);
    border-radius: 2px;
    cursor: pointer;
    -webkit-appearance: none;
}

.crop-row input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
}

.crop-row span {
    width: 35px;
    text-align: right;
    color: var(--text-secondary);
    font-size: 0.75rem;
    font-family: var(--font-mono);
}

.layout-editor-camera-list {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
}

.layout-editor-cam-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.35rem 0.5rem;
    background: var(--bg-tertiary);
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.8rem;
    color: var(--text-primary);
    transition: background 0.2s;
}

.layout-editor-cam-toggle:hover {
    background: var(--bg-elevated);
}

.layout-editor-cam-toggle.future {
    opacity: 0.5;
    cursor: not-allowed;
}

.layout-editor-cam-toggle input {
    accent-color: var(--accent);
}

.future-badge {
    margin-left: auto;
    font-size: 0.65rem;
    padding: 0.15rem 0.4rem;
    background: var(--bg-elevated);
    border-radius: 3px;
    color: var(--text-muted);
}

.layout-editor-saved-list {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
    max-height: 150px;
    overflow-y: auto;
}

.layout-editor-no-layouts {
    color: var(--text-muted);
    font-size: 0.8rem;
    font-style: italic;
    margin: 0;
    padding: 0.5rem;
    text-align: center;
}

.layout-editor-saved-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.4rem 0.5rem;
    background: var(--bg-tertiary);
    border-radius: 4px;
    font-size: 0.8rem;
}

.layout-editor-saved-item:hover {
    background: var(--bg-elevated);
}

.layout-editor-saved-item .layout-name {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--text-primary);
}

.layout-editor-saved-item .layout-actions {
    display: flex;
    gap: 0.25rem;
    margin-left: 0.5rem;
}

.layout-editor-saved-item .layout-actions button {
    padding: 0.25rem;
}

.layout-editor-saved-item .delete-layout-btn:hover {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.layout-editor-footer {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.25rem;
    background: var(--bg-tertiary);
    border-top: 1px solid var(--border);
}

.layout-editor-name-input {
    flex: 1;
    padding: 0.5rem 0.75rem;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.9rem;
}

.layout-editor-name-input:focus {
    border-color: var(--accent);
    outline: none;
}

.layout-editor-footer-buttons {
    display: flex;
    gap: 0.75rem;
}

/* ==================== VERSION & WHAT'S NEW ==================== */

/* Version tag in header */
.brand-tagline.version-tag {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--text-muted);
    cursor: pointer;
    transition: color 0.2s ease;
    position: relative;
}

.brand-tagline.version-tag:hover {
    color: var(--accent);
}

.brand-tagline.version-tag.has-updates::after {
    content: '';
    position: absolute;
    top: -2px;
    right: -8px;
    width: 8px;
    height: 8px;
    background: var(--accent);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--accent-glow);
    animation: pulse-dot 2s ease-in-out infinite;
}

/* Blue dot indicator for new features */
.whats-new-dot {
    position: absolute;
    top: -4px;
    right: -4px;
    width: 10px;
    height: 10px;
    background: var(--accent);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--accent-glow);
    z-index: 100;
    pointer-events: none;
    animation: pulse-dot 2s ease-in-out infinite;
}

@keyframes pulse-dot {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.2);
        opacity: 0.8;
    }
}

/* Update available toast notification */
.update-toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 10000;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    pointer-events: none;
}

.update-toast.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.update-toast-content {
    display: flex;
    align-items: center;
    gap: 12px;
    background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 100%);
    border: 1px solid #3d7a5d;
    border-radius: 12px;
    padding: 12px 16px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05);
    max-width: 360px;
}

.update-toast-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    color: #4ade80;
    flex-shrink: 0;
}

.update-toast-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
    flex: 1;
}

.update-toast-text strong {
    color: #fff;
    font-size: 0.95rem;
    font-weight: 600;
}

.update-toast-text span {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.85rem;
}

.update-toast-btn {
    background: #4ade80;
    color: #0a2a14;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.update-toast-btn:hover {
    background: #6ee7a0;
    transform: scale(1.05);
}

.update-toast-close {
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.5);
    font-size: 1.5rem;
    line-height: 1;
    cursor: pointer;
    padding: 4px 8px;
    margin: -4px -8px -4px 0;
    transition: color 0.2s ease;
}

.update-toast-close:hover {
    color: #fff;
}

/* Mobile responsive */
@media (max-width: 480px) {
    .update-toast {
        bottom: 10px;
        right: 10px;
        left: 10px;
    }

    .update-toast-content {
        max-width: none;
    }
}

/* Changelog modal */
.changelog-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 3000;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    animation: fadeIn 0.2s ease;
}

.changelog-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 16px;
    width: 90%;
    max-width: 550px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-lg), 0 0 60px rgba(0, 212, 255, 0.15);
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.changelog-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid var(--border);
}

.changelog-header h2 {
    font-family: var(--font-ui);
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
    background: linear-gradient(135deg, var(--accent) 0%, #66f0ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.changelog-close {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    font-size: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.changelog-close:hover {
    color: var(--accent);
    border-color: var(--border-accent);
}

.changelog-body {
    flex: 1;
    overflow-y: auto;
    padding: 1.25rem 1.5rem;
}

.changelog-version {
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
}

.changelog-version:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.changelog-version.new {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.05) 0%, transparent 100%);
    margin: -0.5rem -0.75rem 1.5rem;
    padding: 0.75rem 0.75rem 1.5rem;
    border-radius: 8px;
    border: 1px solid var(--border-accent);
    border-bottom: 1px solid var(--border-accent);
}

.changelog-version-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
}

.version-number {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    color: var(--accent);
    font-weight: 600;
    padding: 0.2rem 0.5rem;
    background: var(--bg-tertiary);
    border-radius: 4px;
}

.version-date {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.new-badge {
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--bg-void);
    background: var(--accent);
    padding: 0.15rem 0.5rem;
    border-radius: 10px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    box-shadow: 0 0 8px var(--accent-glow);
}

.version-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.75rem 0;
}

.feature-list {
    margin: 0;
    padding: 0 0 0 1.25rem;
    list-style: none;
}

.feature-list li {
    position: relative;
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    padding-left: 0.25rem;
}

.feature-list li::before {
    content: '';
    position: absolute;
    left: -1rem;
    color: var(--text-muted);
}

.feature-list li.new {
    color: var(--text-primary);
}

.feature-list li.new::before {
    color: var(--accent);
}

.feature-list li:last-child {
    margin-bottom: 0;
}

.changelog-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--border);
    gap: 1rem;
}

.dont-show-again {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: var(--text-muted);
    cursor: pointer;
    user-select: none;
}

.dont-show-again:hover {
    color: var(--text-secondary);
}

.dont-show-again input {
    accent-color: var(--accent);
    cursor: pointer;
}

.changelog-dismiss {
    padding: 0.625rem 1.5rem;
    background: linear-gradient(135deg, var(--accent) 0%, #0099cc 100%);
    color: var(--bg-void);
    border: none;
    border-radius: 8px;
    font-family: var(--font-ui);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 0 15px var(--accent-glow);
    margin-left: auto;
}

.changelog-dismiss:hover {
    background: linear-gradient(135deg, var(--accent-hover) 0%, var(--accent) 100%);
    box-shadow: 0 0 25px var(--accent-glow);
}

/* ==================== OFFLINE PACKAGER MODAL ==================== */

.offline-packager-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.offline-packager-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(4px);
}

.offline-packager-panel {
    position: relative;
    width: 90%;
    max-width: 450px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}

.offline-packager-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
}

.offline-packager-header h2 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
}

.offline-packager-close-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 4px;
    transition: all 0.2s;
}

.offline-packager-close-btn:hover {
    color: var(--text-primary);
    background: var(--bg-elevated);
}

.offline-packager-content {
    padding: 1.25rem;
}

.offline-packager-info {
    margin-bottom: 1rem;
}

.offline-packager-info p {
    margin: 0 0 0.75rem 0;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.offline-packager-info ul {
    margin: 0;
    padding-left: 1.25rem;
    color: var(--text-muted);
    font-size: 0.85rem;
}

.offline-packager-info li {
    margin-bottom: 0.4rem;
}

.offline-packager-note {
    background: var(--bg-tertiary);
    padding: 0.75rem;
    border-radius: 8px;
    font-size: 0.8rem !important;
    color: var(--text-muted) !important;
    border: 1px solid var(--border);
    margin-top: 1rem !important;
}

.offline-packager-progress {
    margin-top: 1rem;
}

.offline-packager-progress.hidden {
    display: none;
}

.progress-bar-container {
    height: 8px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 0.5rem;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent-hover));
    border-radius: 4px;
    width: 0%;
    transition: width 0.3s ease;
}

.progress-text {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin: 0;
}

.offline-packager-footer {
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: flex-end;
    background: var(--bg-tertiary);
}

.offline-packager-btn {
    padding: 0.6rem 1.25rem;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.offline-packager-btn.primary {
    background: var(--accent);
    border: 1px solid var(--accent);
    color: var(--bg-void);
}

.offline-packager-btn.primary:hover:not(:disabled) {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
}

.offline-packager-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Offline package row in settings */
.offline-package-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
}

.offline-package-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.offline-download-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    white-space: nowrap;
}

/* ==================== MAP OFFLINE OVERLAY ==================== */

.map-offline-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.map-offline-content {
    text-align: center;
    padding: 2rem;
}

.map-offline-content svg {
    color: var(--text-muted);
    margin-bottom: 1rem;
    opacity: 0.5;
}

.map-offline-content h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.map-offline-content p {
    margin: 0 0 1.25rem 0;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.map-offline-retry-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1.25rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
}

.map-offline-retry-btn:hover:not(:disabled) {
    background: var(--bg-elevated);
    border-color: var(--accent);
    color: var(--accent);
}

.map-offline-retry-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.map-offline-retry-btn svg.spin {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Light theme overrides */
body.theme-light .offline-packager-overlay {
    background: rgba(0, 0, 0, 0.4);
}

body.theme-light .offline-packager-panel,
body.theme-light .map-offline-overlay {
    background: var(--bg-primary);
}

body.theme-light .offline-packager-header,
body.theme-light .offline-packager-footer {
    background: var(--bg-secondary);
}

/* ==================== DRIVE SYNC UI ==================== */

.sync-drives-btn:not(:disabled) {
    color: var(--accent);
}

.sync-drives-btn:not(:disabled):hover {
    background: var(--accent-subtle);
}

/* Full-screen modal */
.drive-sync-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--bg-primary);
    z-index: 10000;
    overflow: hidden;
}

/* ===== NEW HORIZONTAL SPLIT-PANEL LAYOUT ===== */

.sync-modal-content.sync-horizontal-layout {
    display: flex;
    flex-direction: column;
    height: 100%;
    max-width: none;
    margin: 0;
    padding: 0;
    background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
}

/* Top Toolbar */
.sync-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem 1rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
    gap: 1rem;
    flex-shrink: 0;
}

.sync-toolbar-left {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.sync-toolbar-center {
    flex: 1;
    display: flex;
    justify-content: center;
}

.sync-toolbar-right {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.sync-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    letter-spacing: -0.02em;
}

.sync-title svg {
    color: var(--accent);
}

.sync-toolbar-btn {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-secondary);
    padding: 0.4rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sync-toolbar-btn:hover {
    background: var(--bg-elevated);
    color: var(--accent);
    border-color: var(--border);
}

/* Split Container */
.sync-split-container {
    display: flex;
    flex: 1;
    overflow: hidden;
}

.sync-panel {
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.sync-panel-left {
    flex: 0 0 420px;
    min-width: 360px;
    background: var(--bg-primary);
    border-right: 1px solid var(--border);
}

.sync-panel-right {
    flex: 1;
    min-width: 400px;
    background: var(--bg-secondary);
}

.sync-panel-divider {
    width: 4px;
    background: var(--border);
    cursor: col-resize;
    transition: background 0.2s;
}

.sync-panel-divider:hover {
    background: var(--accent);
}

.sync-panel-header {
    padding: 0.75rem 1rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
}

.sync-panel-title {
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
}

/* Compact Drive Selectors */
.sync-drives-compact {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.sync-drive-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.sync-drive-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    flex-shrink: 0;
}

.sync-drive-icon.source {
    background: rgba(59, 130, 246, 0.15);
    color: #3b82f6;
}

.sync-drive-icon.dest {
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
}

.sync-drive-select-compact {
    flex: 1;
    padding: 0.5rem 0.75rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
}

.sync-drive-select-compact:focus {
    outline: none;
    border-color: var(--accent);
}

.sync-drive-info-compact {
    font-size: 0.75rem;
    color: var(--text-muted);
    min-width: 60px;
    text-align: right;
}

.sync-drive-arrow-compact {
    display: flex;
    justify-content: center;
    padding: 0.25rem 0;
    color: var(--text-muted);
}

/* Compare Bar */
.sync-compare-bar {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border);
}

.sync-compare-btn-compact {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.6rem 1rem;
    background: var(--accent);
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s;
}

.sync-compare-btn-compact:hover:not(:disabled) {
    background: var(--accent-hover);
    transform: translateY(-1px);
}

.sync-compare-btn-compact:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Compact Results */
.sync-results-compact {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.sync-results-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 0.5rem;
}

.sync-results-grid-compact {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.sync-notes-compact {
    padding: 0.5rem 1rem;
    border-top: 1px solid var(--border);
    background: var(--bg-secondary);
}

.sync-checkbox-compact {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--text-secondary);
    cursor: pointer;
}

.sync-notes-count {
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* Compact Progress */
.sync-progress-compact {
    padding: 1rem;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border);
}

.sync-progress-header-compact {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    font-size: 0.85rem;
}

.sync-progress-bar-compact {
    height: 6px;
    background: var(--bg-tertiary);
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 0.5rem;
}

.sync-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), #22c55e);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.sync-progress-details {
    display: flex;
    justify-content: space-between;
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Compact Complete */
.sync-complete-compact {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: rgba(34, 197, 94, 0.1);
    border-top: 1px solid rgba(34, 197, 94, 0.3);
}

.sync-complete-badge {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #22c55e;
    border-radius: 50%;
    color: white;
    flex-shrink: 0;
}

.sync-complete-info {
    flex: 1;
}

.sync-complete-title {
    display: block;
    font-weight: 600;
    color: #22c55e;
    margin-bottom: 0.25rem;
}

.sync-complete-summary-text {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.sync-errors-compact {
    margin-top: 0.5rem;
    padding: 0.5rem;
    background: rgba(239, 68, 68, 0.1);
    border-radius: 4px;
    font-size: 0.8rem;
    color: var(--danger);
}

/* Inline Statistics */
.sync-stats-inline {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
}

.sync-stats-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    min-height: 300px;
    color: var(--text-muted);
    text-align: center;
    gap: 1rem;
}

.sync-stats-placeholder span {
    font-size: 0.9rem;
}

.sync-stats-content-inline {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

/* Bottom Action Bar */
.sync-action-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    background: var(--bg-tertiary);
    border-top: 1px solid var(--border);
    gap: 1rem;
    flex-shrink: 0;
}

.sync-action-bar-left {
    flex: 1;
}

.sync-action-bar-center {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.sync-action-bar-right {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.sync-selection-summary {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* Mode Toggle */
.sync-mode-toggle {
    display: flex;
    background: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border);
    overflow: hidden;
}

.sync-mode-option {
    cursor: pointer;
}

.sync-mode-option input {
    display: none;
}

.sync-mode-label {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.4rem 0.75rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
    transition: all 0.15s;
}

.sync-mode-option input:checked + .sync-mode-label {
    background: var(--accent);
    color: white;
}

.sync-mode-option:hover .sync-mode-label {
    background: var(--bg-tertiary);
}

.sync-mode-option input:checked + .sync-mode-label:hover {
    background: var(--accent-hover);
}

/* Action Buttons */
.sync-action-btn {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s;
    border: 1px solid transparent;
}

.sync-btn-primary {
    background: var(--accent);
    color: white;
}

.sync-btn-primary:hover:not(:disabled) {
    background: var(--accent-hover);
    transform: translateY(-1px);
}

.sync-btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.sync-btn-secondary {
    background: var(--bg-secondary);
    border-color: var(--border);
    color: var(--text-secondary);
}

.sync-btn-secondary:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

.sync-btn-success {
    background: #22c55e;
    color: white;
}

.sync-btn-success:hover {
    background: #16a34a;
}

/* Responsive for smaller screens */
@media (max-width: 900px) {
    .sync-split-container {
        flex-direction: column;
    }

    .sync-panel-left {
        flex: 0 0 auto;
        min-width: auto;
        border-right: none;
        border-bottom: 1px solid var(--border);
    }

    .sync-panel-right {
        min-width: auto;
        flex: 1;
    }

    .sync-panel-divider {
        display: none;
    }

    .sync-action-bar {
        flex-wrap: wrap;
    }

    .sync-action-bar-left {
        width: 100%;
        margin-bottom: 0.5rem;
    }
}

/* ===== END HORIZONTAL LAYOUT ===== */

/* Legacy vertical layout support */
.sync-modal-content:not(.sync-horizontal-layout) {
    display: flex;
    flex-direction: column;
    height: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
}

.sync-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 0;
    border-bottom: 1px solid var(--border);
}

.sync-modal-header h2 {
    flex: 1;
    text-align: center;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.sync-close-btn,
.sync-settings-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: 0.5rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sync-close-btn:hover,
.sync-settings-btn:hover {
    color: var(--accent);
    background: var(--bg-elevated);
    border-color: var(--border-accent);
}

.sync-modal-body {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem 0;
}

/* Drive Selection Section */
.sync-drives-section {
    display: flex;
    align-items: stretch;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 1.5rem;
}

.sync-drive-card {
    flex: 1;
    max-width: 350px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.25rem;
}

.sync-drive-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.75rem;
}

.sync-drive-label {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.sync-refresh-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    padding: 0.25rem;
    cursor: pointer;
    transition: color 0.2s;
}

.sync-refresh-btn:hover {
    color: var(--accent);
}

.sync-drive-select {
    width: 100%;
    padding: 0.75rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.9rem;
    cursor: pointer;
}

.sync-drive-select:focus {
    outline: none;
    border-color: var(--accent);
}

.sync-drive-info {
    margin-top: 0.75rem;
    display: flex;
    gap: 1rem;
}

.sync-drive-stat {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.sync-drive-stat .stat-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.sync-drive-stat .stat-value {
    font-family: var(--font-mono);
    font-size: 0.9rem;
    color: var(--accent);
}

.sync-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent);
}

/* Compare Button */
.sync-compare-section {
    display: flex;
    justify-content: center;
    margin-bottom: 1.5rem;
}

.sync-compare-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 2rem;
    background: linear-gradient(135deg, var(--accent) 0%, #0099cc 100%);
    border: none;
    border-radius: 8px;
    color: #000;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-compare-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 20px var(--accent-glow);
}

.sync-compare-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

/* Spinner */
.sync-spinner {
    width: 20px;
    height: 20px;
    border: 2px solid transparent;
    border-top-color: currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* Results Section */
.sync-results-section {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}

.sync-results-section h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-primary);
}

.sync-results-grid {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.sync-result-category {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
}

.sync-category-header {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    gap: 1rem;
}

.sync-category-header label {
    flex: 1;
}

.sync-category-size {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.sync-expand-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.25rem;
    transition: transform 0.2s;
}

.sync-expand-btn.expanded {
    transform: rotate(180deg);
}

.sync-category-items {
    padding: 0 1rem 0.75rem;
    max-height: 200px;
    overflow-y: auto;
}

.sync-item-label {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border);
    cursor: pointer;
}

.sync-item-label:last-child {
    border-bottom: none;
}

.sync-item-name {
    flex: 1;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.sync-item-size {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Checkbox styling */
.sync-checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    color: var(--text-primary);
}

.sync-checkbox-label input[type="checkbox"] {
    appearance: none;
    width: 18px;
    height: 18px;
    background: var(--bg-tertiary);
    border: 2px solid var(--border);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
}

.sync-checkbox-label input[type="checkbox"]:checked {
    background: var(--accent);
    border-color: var(--accent);
}

.sync-checkbox-label input[type="checkbox"]:checked::after {
    content: '';
    display: block;
    width: 6px;
    height: 10px;
    border: solid var(--bg-primary);
    border-width: 0 2px 2px 0;
    transform: rotate(45deg) translate(-1px, -1px);
    margin: 2px 0 0 5px;
}

/* Radio styling */
.sync-radio-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    color: var(--text-primary);
    padding: 0.5rem 0;
}

.sync-radio-label input[type="radio"] {
    appearance: none;
    width: 18px;
    height: 18px;
    background: var(--bg-tertiary);
    border: 2px solid var(--border);
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-radio-label input[type="radio"]:checked {
    border-color: var(--accent);
}

.sync-radio-label input[type="radio"]:checked::after {
    content: '';
    display: block;
    width: 10px;
    height: 10px;
    background: var(--accent);
    border-radius: 50%;
    margin: 2px;
}

/* Notes section */
.sync-notes-section {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border);
}

.sync-notes-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
}

/* Summary and mode */
.sync-summary {
    margin-top: 1rem;
    padding: 0.75rem 1rem;
    background: var(--bg-tertiary);
    border-radius: 8px;
    font-family: var(--font-mono);
    color: var(--accent);
}

.sync-mode-section {
    margin-top: 1rem;
    display: flex;
    gap: 2rem;
}

/* Action buttons */
.sync-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1.5rem;
}

.sync-start-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 2rem;
    background: linear-gradient(135deg, var(--success) 0%, #00cc6a 100%);
    border: none;
    border-radius: 8px;
    color: #000;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-start-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 20px var(--success-glow);
}

.sync-start-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.sync-cancel-btn {
    padding: 0.875rem 1.5rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-secondary);
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-cancel-btn:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

/* Progress Section */
.sync-progress-section {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
}

.sync-progress-section h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-primary);
}

.sync-progress-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.sync-current-item {
    font-family: var(--font-mono);
    font-size: 0.9rem;
    color: var(--text-secondary);
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.sync-progress-bar-container {
    height: 24px;
    background: var(--bg-tertiary);
    border-radius: 12px;
    overflow: hidden;
    position: relative;
}

.sync-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--accent) 0%, var(--success) 100%);
    border-radius: 12px;
    transition: width 0.3s ease;
    width: 0%;
}

.sync-progress-percent {
    text-align: center;
    font-family: var(--font-mono);
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--accent);
}

.sync-progress-stats {
    display: flex;
    justify-content: space-between;
    font-family: var(--font-mono);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.sync-speed-stats {
    display: flex;
    justify-content: space-between;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--text-muted);
}

.sync-progress-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 0.5rem;
}

.sync-pause-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: var(--warning);
    border: none;
    border-radius: 8px;
    color: #000;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-pause-btn:hover {
    box-shadow: 0 4px 15px var(--warning-glow);
}

/* Complete Section */
.sync-complete-section {
    text-align: center;
    padding: 3rem 1.5rem;
}

.sync-complete-icon {
    color: var(--success);
    margin-bottom: 1rem;
}

.sync-complete-section h3 {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.sync-complete-summary {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
}

.sync-complete-summary p {
    margin: 0.5rem 0;
}

.sync-errors {
    background: rgba(255, 59, 59, 0.1);
    border: 1px solid var(--danger);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1.5rem;
    text-align: left;
}

.sync-errors h4 {
    color: var(--danger);
    margin-bottom: 0.5rem;
}

.sync-errors ul {
    list-style: none;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.sync-errors li {
    padding: 0.25rem 0;
}

.sync-error-text {
    color: var(--danger);
}

.sync-done-btn {
    padding: 0.875rem 3rem;
    background: linear-gradient(135deg, var(--accent) 0%, #0099cc 100%);
    border: none;
    border-radius: 8px;
    color: #000;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-done-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 20px var(--accent-glow);
}

/* Settings Panel */
.sync-settings-panel {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

.sync-settings-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    width: 100%;
    max-width: 450px;
}

.sync-settings-content h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-primary);
}

.sync-settings-form {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.sync-settings-group {
    margin-top: 0.5rem;
}

.sync-settings-group label {
    display: block;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}

.sync-settings-select {
    width: 100%;
    padding: 0.5rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.9rem;
}

.sync-settings-actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    margin-top: 1.5rem;
}

.sync-save-btn {
    padding: 0.625rem 1.25rem;
    background: var(--accent);
    border: none;
    border-radius: 6px;
    color: #000;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-save-btn:hover {
    box-shadow: 0 4px 15px var(--accent-glow);
}

/* Light theme overrides */
body.theme-light .drive-sync-modal {
    background: var(--bg-primary);
}

body.theme-light .sync-drive-card,
body.theme-light .sync-results-section,
body.theme-light .sync-progress-section,
body.theme-light .sync-settings-content {
    background: var(--bg-secondary);
}

body.theme-light .sync-compare-btn,
body.theme-light .sync-start-btn,
body.theme-light .sync-done-btn,
body.theme-light .sync-save-btn {
    color: #fff;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .sync-drives-section {
        flex-direction: column;
        gap: 1rem;
    }

    .sync-drive-card {
        max-width: none;
    }

    .sync-arrow {
        transform: rotate(90deg);
    }

    .sync-mode-section {
        flex-direction: column;
        gap: 0.5rem;
    }
}

/* Presets Section */
.sync-presets-section {
    margin-bottom: 1rem;
    background: var(--panel-bg);
    padding: 0.75rem 1rem;
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.sync-presets-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
}

.sync-presets-label {
    color: var(--text-secondary);
    font-size: 0.85rem;
    font-weight: 500;
    margin-right: 0.25rem;
}

.sync-no-presets-hint {
    color: var(--text-muted);
    font-size: 0.85rem;
    font-style: italic;
}

.sync-preset-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.4rem 0.75rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.sync-preset-chip:hover {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
}

.sync-preset-chip.active {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
}

.sync-preset-chip.sync-preset-load {
    background: var(--bg-secondary);
}

.sync-preset-chip.sync-preset-load:hover {
    background: var(--accent);
    color: white;
}

.sync-preset-chip.sync-preset-save {
    background: transparent;
    border-style: dashed;
    color: var(--text-secondary);
}

.sync-preset-chip.sync-preset-save:hover:not(:disabled) {
    background: var(--success);
    border-color: var(--success);
    border-style: solid;
    color: white;
}

.sync-preset-chip.sync-preset-save:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.sync-preset-chip.sync-preset-manage {
    background: transparent;
    border-color: transparent;
    color: var(--text-secondary);
    padding: 0.4rem 0.5rem;
}

.sync-preset-chip.sync-preset-manage:hover {
    background: var(--bg-tertiary);
    color: var(--accent);
}

.sync-preset-chip svg {
    flex-shrink: 0;
}

.sync-presets-row {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.sync-preset-select {
    flex: 1;
    padding: 0.625rem 0.75rem;
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.9rem;
    cursor: pointer;
}

.sync-preset-select:focus {
    border-color: var(--accent);
    outline: none;
}

.sync-preset-btn {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.625rem 0.875rem;
    background: var(--accent);
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-preset-btn:hover:not(:disabled) {
    background: var(--accent-hover);
}

.sync-preset-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.sync-manage-presets-btn {
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 6px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sync-manage-presets-btn:hover {
    color: var(--accent);
    border-color: var(--accent);
}

/* Manage Presets Panel */
.sync-presets-manage {
    max-width: 500px;
}

.sync-presets-list {
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: 1rem;
}

.sync-no-presets {
    color: var(--text-secondary);
    text-align: center;
    padding: 2rem;
    font-style: italic;
}

.sync-preset-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    border-bottom: 1px solid var(--border-color);
}

.sync-preset-item:last-child {
    border-bottom: none;
}

.sync-preset-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.sync-preset-name {
    font-weight: 500;
    color: var(--text-primary);
}

.sync-preset-path {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.sync-preset-imported {
    font-size: 0.75rem;
    color: var(--accent);
    font-style: italic;
}

.sync-preset-actions {
    display: flex;
    gap: 0.5rem;
}

.sync-preset-delete-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

.sync-preset-delete-btn:hover {
    color: var(--danger);
    background: rgba(255, 59, 59, 0.1);
}

.sync-import-btn {
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-import-btn:hover {
    background: var(--border-color);
}

/* Statistics Section */
.sync-statistics-section {
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 1.5rem;
    margin-top: 1rem;
}

.sync-stats-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
}

.sync-stats-header h3 {
    margin: 0;
    font-size: 1.25rem;
}

.sync-close-stats-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

.sync-close-stats-btn:hover {
    color: var(--text-primary);
    background: var(--border-color);
}

.sync-stats-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s;
}

.sync-stats-btn:hover {
    background: var(--border-color);
}

.sync-stats-content {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    max-height: 60vh;
    overflow-y: auto;
}

/* Statistics Overview Cards */
.sync-stats-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
}

.sync-stat-card {
    background: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
}

.sync-stat-value {
    display: block;
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 0.25rem;
}

.sync-stat-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Statistics Section Blocks */
.sync-stats-section-block {
    background: var(--bg-color);
    border-radius: 8px;
    padding: 1rem;
}

.sync-stats-section-block h4 {
    margin: 0 0 1rem 0;
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-primary);
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

/* Storage Bars */
.sync-stats-bars {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.sync-stat-bar-row {
    display: grid;
    grid-template-columns: 120px 1fr 100px;
    gap: 1rem;
    align-items: center;
}

.sync-stat-bar-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.sync-stat-bar-container {
    height: 12px;
    background: var(--border-color);
    border-radius: 6px;
    overflow: hidden;
}

.sync-stat-bar {
    height: 100%;
    border-radius: 6px;
    transition: width 0.3s ease;
}

.sync-stat-bar.source {
    background: var(--accent);
}

.sync-stat-bar.dest {
    background: #22c55e;
}

.sync-stat-bar.transfer {
    background: #f59e0b;
}

.sync-stat-bar-value {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary);
    text-align: right;
}

/* Date Range */
.sync-stats-date-range {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.sync-date-range-item {
    display: flex;
    gap: 0.75rem;
}

.sync-date-label {
    font-weight: 500;
    color: var(--text-secondary);
    min-width: 100px;
}

.sync-date-value {
    color: var(--text-primary);
}

/* Type Stats Grid */
.sync-stats-type-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1rem;
}

.sync-type-stat {
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
}

.sync-type-header {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

.sync-type-row {
    display: flex;
    justify-content: space-between;
    padding: 0.35rem 0;
    font-size: 0.9rem;
}

.sync-type-row span:first-child {
    color: var(--text-secondary);
}

.sync-type-row.missing span {
    color: #f59e0b;
}

/* Location List */
.sync-location-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.sync-location-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0.75rem;
    background: var(--panel-bg);
    border-radius: 6px;
}

.sync-location-name {
    font-size: 0.9rem;
    color: var(--text-primary);
}

.sync-location-counts {
    display: flex;
    gap: 0.75rem;
    font-size: 0.85rem;
}

.sync-location-counts .source {
    color: var(--accent);
}

.sync-location-counts .dest {
    color: #22c55e;
}

.sync-location-counts .missing {
    color: #f59e0b;
}

.sync-no-data {
    color: var(--text-secondary);
    font-style: italic;
    text-align: center;
    padding: 1rem;
}

/* Month Chart */
.sync-month-chart {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.sync-month-row {
    display: grid;
    grid-template-columns: 80px 1fr 150px;
    gap: 1rem;
    align-items: center;
}

.sync-month-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-family: 'JetBrains Mono', monospace;
}

.sync-month-bars {
    height: 20px;
    position: relative;
    background: var(--border-color);
    border-radius: 4px;
    overflow: hidden;
}

.sync-month-bar {
    position: absolute;
    height: 50%;
    border-radius: 2px;
    transition: width 0.3s ease;
}

.sync-month-bar.source {
    top: 0;
    background: var(--accent);
}

.sync-month-bar.dest {
    bottom: 0;
    background: #22c55e;
}

.sync-month-counts {
    font-size: 0.85rem;
    color: var(--text-primary);
}

.sync-month-counts .missing {
    color: #f59e0b;
    font-size: 0.8rem;
}

/* Stats Filter */
.sync-stats-filter {
    margin-bottom: 1rem;
}

.sync-stats-filter-select {
    padding: 0.5rem 1rem;
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.9rem;
}

/* Detailed Table */
.sync-stats-table-container {
    overflow-x: auto;
}

.sync-stats-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
}

.sync-stats-table th,
.sync-stats-table td {
    padding: 0.75rem 0.5rem;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.sync-stats-table th {
    font-weight: 500;
    color: var(--text-secondary);
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.sync-stats-table th.sortable {
    cursor: pointer;
    transition: color 0.2s;
}

.sync-stats-table th.sortable:hover {
    color: var(--accent);
}

.sync-stats-table tbody tr:hover {
    background: rgba(74, 158, 255, 0.05);
}

.sync-stats-table tbody tr.status-missing {
    background: rgba(245, 158, 11, 0.05);
}

.sync-stats-table tbody tr.status-newer {
    background: rgba(74, 158, 255, 0.05);
}

.sync-stats-table .event-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
}

.status-badge {
    display: inline-block;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
}

.status-badge.missing {
    background: rgba(245, 158, 11, 0.2);
    color: #f59e0b;
}

.status-badge.newer {
    background: rgba(74, 158, 255, 0.2);
    color: var(--accent);
}

.status-badge.same {
    background: rgba(34, 197, 94, 0.2);
    color: #22c55e;
}

.status-badge.differentSize {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.sync-table-note {
    text-align: center;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-top: 0.75rem;
    font-style: italic;
}

/* Light theme overrides for presets and statistics */
body.theme-light .sync-presets-section,
body.theme-light .sync-statistics-section,
body.theme-light .sync-stats-section-block {
    background: var(--bg-secondary);
}

body.theme-light .sync-stat-card,
body.theme-light .sync-type-stat,
body.theme-light .sync-location-item {
    background: var(--bg-primary);
}

body.theme-light .sync-preset-btn {
    color: #fff;
}

body.theme-light .sync-preset-chip {
    background: var(--bg-primary);
    border-color: var(--border-color);
}

body.theme-light .sync-preset-chip.sync-preset-load {
    background: var(--bg-primary);
}

body.theme-light .sync-preset-chip.sync-preset-save {
    background: transparent;
}

body.theme-light .sync-preset-chip.sync-preset-manage {
    background: transparent;
}

/* Light theme for horizontal layout */
body.theme-light .sync-toolbar {
    background: var(--bg-secondary);
}

body.theme-light .sync-panel-left {
    background: var(--bg-primary);
}

body.theme-light .sync-panel-right {
    background: var(--bg-secondary);
}

body.theme-light .sync-panel-header {
    background: var(--bg-tertiary);
}

body.theme-light .sync-drive-select-compact {
    background: var(--bg-primary);
}

body.theme-light .sync-action-bar {
    background: var(--bg-secondary);
}

body.theme-light .sync-mode-toggle {
    background: var(--bg-primary);
}

body.theme-light .sync-btn-secondary {
    background: var(--bg-primary);
}

/* Responsive adjustments for stats */
@media (max-width: 768px) {
    .sync-presets-chips {
        gap: 0.35rem;
    }

    .sync-preset-chip {
        padding: 0.3rem 0.6rem;
        font-size: 0.8rem;
    }

    .sync-presets-label {
        width: 100%;
        margin-bottom: 0.25rem;
    }

    .sync-stats-overview {
        grid-template-columns: repeat(2, 1fr);
    }

    .sync-stat-bar-row {
        grid-template-columns: 1fr;
        gap: 0.25rem;
    }

    .sync-month-row {
        grid-template-columns: 1fr;
        gap: 0.25rem;
    }

    .sync-stats-table {
        font-size: 0.75rem;
    }

    .sync-stats-table th,
    .sync-stats-table td {
        padding: 0.5rem 0.25rem;
    }
}

/* ========================================
   Incident Slow-Mo Feature Styles
   ======================================== */

.incident-slowmo-toggle {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
}

.incident-slowmo-toggle:hover {
    background: var(--bg-tertiary);
    border-color: var(--accent);
    color: var(--text-primary);
}

.incident-slowmo-toggle.active {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
    box-shadow: 0 0 12px var(--accent-glow);
}

.incident-slowmo-toggle svg {
    width: 18px;
    height: 18px;
}

/* Slow-mo indicator animation */
@keyframes pulse-glow {
    0%, 100% {
        box-shadow: 0 4px 12px rgba(255, 59, 59, 0.4);
    }
    50% {
        box-shadow: 0 4px 20px rgba(255, 59, 59, 0.6), 0 0 30px rgba(255, 59, 59, 0.3);
    }
}

.incident-slowmo-indicator {
    font-family: var(--font-ui);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.incident-slowmo-indicator .slowmo-text {
    font-weight: 600;
}

.incident-slowmo-indicator .slowmo-score {
    font-size: 12px;
    opacity: 0.9;
    background: rgba(0, 0, 0, 0.2);
    padding: 2px 8px;
    border-radius: 10px;
}

/* ========================================
   Collision Reconstruction (Bird's Eye) Styles
   ======================================== */

.collision-overlay {
    font-family: var(--font-ui);
}

.collision-overlay .collision-header {
    font-family: var(--font-mono);
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.collision-overlay .collision-title {
    display: flex;
    align-items: center;
}

.collision-overlay .collision-scale {
    color: var(--accent);
    font-weight: 500;
}

.collision-overlay .collision-legend {
    font-family: var(--font-mono);
}

/* Collision toggle button */
.collision-toggle {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
}

.collision-toggle:hover {
    background: var(--bg-tertiary);
    border-color: var(--accent);
    color: var(--text-primary);
}

.collision-toggle.active {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
    box-shadow: 0 0 12px var(--accent-glow);
}

.collision-toggle svg {
    width: 18px;
    height: 18px;
}

/* Light theme overrides */
body.theme-light .incident-slowmo-toggle {
    background: var(--bg-secondary);
    border-color: var(--border);
}

body.theme-light .incident-slowmo-toggle:hover {
    background: var(--bg-tertiary);
}

body.theme-light .incident-slowmo-toggle.active {
    background: rgba(0, 150, 200, 0.15);
}

body.theme-light .collision-toggle {
    background: var(--bg-secondary);
    border-color: var(--border);
}

body.theme-light .collision-toggle:hover {
    background: var(--bg-tertiary);
}

body.theme-light .collision-toggle.active {
    background: rgba(0, 150, 200, 0.15);
}

body.theme-light .collision-overlay {
    background: rgba(255, 255, 255, 0.95);
    border-color: var(--border);
}

body.theme-light .collision-overlay .collision-header {
    background: rgba(0, 0, 0, 0.05);
    border-color: var(--border);
    color: var(--text-secondary);
}

body.theme-light .collision-overlay .collision-scale {
    color: var(--accent);
}

body.theme-light .collision-overlay .collision-legend {
    color: var(--text-muted);
}

body.theme-light .collision-overlay .collision-close-btn {
    background: rgba(0, 0, 0, 0.1);
    color: var(--text-muted);
}

body.theme-light .collision-overlay .collision-close-btn:hover {
    background: rgba(0, 0, 0, 0.2);
}

/* =============================================
   DIAGNOSTIC TOAST & MODAL
   ============================================= */

/* Simple Toast */
.simple-toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--bg-elevated);
    color: var(--text-primary);
    padding: 12px 24px;
    border-radius: 8px;
    border: 1px solid var(--border);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    z-index: 10000;
    font-size: 14px;
    opacity: 0;
    transition: all 0.3s ease;
}

.simple-toast.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

/* Diagnostic Toast */
.diagnostic-toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--bg-elevated);
    border: 1px solid var(--accent);
    border-radius: 8px;
    box-shadow: 0 4px 24px rgba(0, 212, 255, 0.2);
    z-index: 10000;
    opacity: 0;
    transition: all 0.3s ease;
    max-width: 90vw;
}

.diagnostic-toast.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

.diagnostic-toast.has-errors {
    border-color: var(--warning);
    box-shadow: 0 4px 24px rgba(255, 184, 0, 0.2);
}

.diagnostic-toast-content {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px 16px;
}

.diagnostic-message {
    color: var(--text-primary);
    font-size: 14px;
    white-space: nowrap;
}

.diagnostic-actions {
    display: flex;
    gap: 8px;
}

.diagnostic-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.diagnostic-btn:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--accent);
}

.diagnostic-btn.copy-btn:hover {
    background: var(--accent-subtle);
    border-color: var(--accent);
    color: var(--accent);
}

.diagnostic-btn.close-btn {
    padding: 6px 10px;
    font-size: 14px;
}

/* Diagnostic Modal */
.diagnostic-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10001;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.diagnostic-modal-overlay.show {
    opacity: 1;
}

.diagnostic-modal {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
}

.diagnostic-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
}

.diagnostic-modal-header h3 {
    margin: 0;
    color: var(--text-primary);
    font-size: 16px;
    font-weight: 500;
}

.diagnostic-modal-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 20px;
    cursor: pointer;
    padding: 4px 8px;
    line-height: 1;
}

.diagnostic-modal-close:hover {
    color: var(--text-primary);
}

.diagnostic-modal-body {
    padding: 20px;
    overflow: auto;
    flex: 1;
}

.diagnostic-modal-body p {
    margin: 0 0 12px 0;
    color: var(--text-secondary);
    font-size: 14px;
}

.diagnostic-textarea {
    width: 100%;
    height: 300px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    padding: 12px;
    resize: vertical;
    box-sizing: border-box;
}

.diagnostic-textarea:focus {
    outline: none;
    border-color: var(--accent);
}

.diagnostic-modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    padding: 16px 20px;
    border-top: 1px solid var(--border);
}

.diagnostic-btn.primary {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--bg-primary);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.diagnostic-btn.primary:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
}

/* Light theme */
body.theme-light .simple-toast {
    background: white;
    border-color: var(--border);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

body.theme-light .diagnostic-toast {
    background: white;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15);
}

body.theme-light .diagnostic-modal {
    background: white;
}

body.theme-light .diagnostic-textarea {
    background: #f5f5f5;
}
